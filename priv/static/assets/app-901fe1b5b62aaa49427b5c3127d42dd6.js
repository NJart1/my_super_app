(()=>{var Cn=Object.create;var Lt=Object.defineProperty,Tn=Object.defineProperties,Pn=Object.getOwnPropertyDescriptor,_n=Object.getOwnPropertyDescriptors,Ln=Object.getOwnPropertyNames,_t=Object.getOwnPropertySymbols,Rn=Object.getPrototypeOf,si=Object.prototype.hasOwnProperty,ir=Object.prototype.propertyIsEnumerable;var tr=(e,t,i)=>t in e?Lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ne=(e,t)=>{for(var i in t||(t={}))si.call(t,i)&&tr(e,i,t[i]);if(_t)for(var i of _t(t))ir.call(t,i)&&tr(e,i,t[i]);return e},rr=(e,t)=>Tn(e,_n(t));var nr=(e,t)=>{var i={};for(var r in e)si.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&_t)for(var r of _t(e))t.indexOf(r)<0&&ir.call(e,r)&&(i[r]=e[r]);return i};var On=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),oi=(e,t)=>{for(var i in t)Lt(e,i,{get:t[i],enumerable:!0})},In=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Ln(t))!si.call(e,n)&&n!==i&&Lt(e,n,{get:()=>t[n],enumerable:!(r=Pn(t,n))||r.enumerable});return e};var Dn=(e,t,i)=>(i=e!=null?Cn(Rn(e)):{},In(t||!e||!e.__esModule?Lt(i,"default",{value:e,enumerable:!0}):i,e));var jr=On(($r,Kt)=>{(function(e,t){"use strict";(function(){for(var u=0,m=["ms","moz","webkit","o"],g=0;g<m.length&&!e.requestAnimationFrame;++g)e.requestAnimationFrame=e[m[g]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[m[g]+"CancelAnimationFrame"]||e[m[g]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(w,A){var E=new Date().getTime(),C=Math.max(0,16-(E-u)),c=e.setTimeout(function(){w(E+C)},C);return u=E+C,c}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(w){clearTimeout(w)})})();var i,r,n,s=null,o=null,a=null,l=function(u,m,g){u.addEventListener?u.addEventListener(m,g,!1):u.attachEvent?u.attachEvent("on"+m,g):u["on"+m]=g},h={autoRun:!0,barThickness:3,barColors:{0:"rgba(26,  188, 156, .9)",".25":"rgba(52,  152, 219, .9)",".50":"rgba(241, 196, 15,  .9)",".75":"rgba(230, 126, 34,  .9)","1.0":"rgba(211, 84,  0,   .9)"},shadowBlur:10,shadowColor:"rgba(0,   0,   0,   .6)",className:null},d=function(){i.width=e.innerWidth,i.height=h.barThickness*5;var u=i.getContext("2d");u.shadowBlur=h.shadowBlur,u.shadowColor=h.shadowColor;var m=u.createLinearGradient(0,0,i.width,0);for(var g in h.barColors)m.addColorStop(g,h.barColors[g]);u.lineWidth=h.barThickness,u.beginPath(),u.moveTo(0,h.barThickness/2),u.lineTo(Math.ceil(r*i.width),h.barThickness/2),u.strokeStyle=m,u.stroke()},p=function(){i=t.createElement("canvas");var u=i.style;u.position="fixed",u.top=u.left=u.right=u.margin=u.padding=0,u.zIndex=100001,u.display="none",h.className&&i.classList.add(h.className),t.body.appendChild(i),l(e,"resize",d)},v={config:function(u){for(var m in u)h.hasOwnProperty(m)&&(h[m]=u[m])},show:function(u){if(!n)if(u){if(a)return;a=setTimeout(()=>v.show(),u)}else n=!0,o!==null&&e.cancelAnimationFrame(o),i||p(),i.style.opacity=1,i.style.display="block",v.progress(0),h.autoRun&&function m(){s=e.requestAnimationFrame(m),v.progress("+"+.05*Math.pow(1-Math.sqrt(r),2))}()},progress:function(u){return typeof u=="undefined"||(typeof u=="string"&&(u=(u.indexOf("+")>=0||u.indexOf("-")>=0?r:0)+parseFloat(u)),r=u>1?1:u,d()),r},hide:function(){clearTimeout(a),a=null,n&&(n=!1,s!=null&&(e.cancelAnimationFrame(s),s=null),function u(){if(v.progress("+.1")>=1&&(i.style.opacity-=.05,i.style.opacity<=.05)){i.style.display="none",o=null;return}o=e.requestAnimationFrame(u)}())}};typeof Kt=="object"&&typeof Kt.exports=="object"?Kt.exports=v:typeof define=="function"&&define.amd?define(function(){return v}):this.topbar=v}).call($r,window,document)});(function(){var e=t();function t(){if(typeof window.CustomEvent=="function")return window.CustomEvent;function n(s,o){o=o||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(s,o.bubbles,o.cancelable,o.detail),a}return n.prototype=window.Event.prototype,n}function i(n,s){var o=document.createElement("input");return o.type="hidden",o.name=n,o.value=s,o}function r(n,s){var o=n.getAttribute("data-to"),a=i("_method",n.getAttribute("data-method")),l=i("_csrf_token",n.getAttribute("data-csrf")),h=document.createElement("form"),d=document.createElement("input"),p=n.getAttribute("target");h.method=n.getAttribute("data-method")==="get"?"get":"post",h.action=o,h.style.display="none",p?h.target=p:s&&(h.target="_blank"),h.appendChild(l),h.appendChild(a),document.body.appendChild(h),d.type="submit",h.appendChild(d),d.click()}window.addEventListener("click",function(n){var s=n.target;if(!n.defaultPrevented)for(;s&&s.getAttribute;){var o=new e("phoenix.link.click",{bubbles:!0,cancelable:!0});if(!s.dispatchEvent(o))return n.preventDefault(),n.stopImmediatePropagation(),!1;if(s.getAttribute("data-method"))return r(s,n.metaKey||n.shiftKey),n.preventDefault(),!1;s=s.parentNode}},!1),window.addEventListener("phoenix.link.click",function(n){var s=n.target.getAttribute("data-confirm");s&&!window.confirm(s)&&n.preventDefault()},!1)})();var lt=e=>typeof e=="function"?e:function(){return e},Hn=typeof self!="undefined"?self:null,at=typeof window!="undefined"?window:null,ze=Hn||at||ze,Mn="2.0.0",we={connecting:0,open:1,closing:2,closed:3},Nn=1e4,Fn=1e3,le={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},Se={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},ai={longpoll:"longpoll",websocket:"websocket"},Bn={complete:4},Rt=class{constructor(e,t,i,r){this.channel=e,this.event=t,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=r,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(e){this.timeout=e,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:e,response:t,_ref:i}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}cancelRefEvent(){!this.refEvent||this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=e,this.matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}trigger(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}},sr=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},$n=class{constructor(e,t,i){this.state=le.closed,this.topic=e,this.params=lt(t||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new Rt(this,Se.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new sr(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=le.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=le.closed,this.socket.remove(this)}),this.onError(r=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,r),this.isJoining()&&this.joinPush.reset(),this.state=le.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new Rt(this,Se.leave,lt({}),this.timeout).send(),this.state=le.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(Se.reply,(r,n)=>{this.trigger(this.replyEventName(n),r)})}join(e=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(e){this.on(Se.close,e)}onError(e){return this.on(Se.error,t=>e(t))}on(e,t){let i=this.bindingRef++;return this.bindings.push({event:e,ref:i,callback:t}),i}off(e,t){this.bindings=this.bindings.filter(i=>!(i.event===e&&(typeof t=="undefined"||t===i.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,i=this.timeout){if(t=t||{},!this.joinedOnce)throw new Error(`tried to push '${e}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let r=new Rt(this,e,function(){return t},i);return this.canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}leave(e=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=le.leaving;let t=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(Se.close,"leave")},i=new Rt(this,Se.leave,lt({}),e);return i.receive("ok",()=>t()).receive("timeout",()=>t()),i.send(),this.canPush()||i.trigger("ok",{}),i}onMessage(e,t,i){return t}isMember(e,t,i,r){return this.topic!==e?!1:r&&r!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:i,joinRef:r}),!1):!0}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=le.joining,this.joinPush.resend(e))}trigger(e,t,i,r){let n=this.onMessage(e,t,i,r);if(t&&!n)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let s=this.bindings.filter(o=>o.event===e);for(let o=0;o<s.length;o++)s[o].callback(n,i,r||this.joinRef())}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===le.closed}isErrored(){return this.state===le.errored}isJoined(){return this.state===le.joined}isJoining(){return this.state===le.joining}isLeaving(){return this.state===le.leaving}},It=class{static request(e,t,i,r,n,s,o){if(ze.XDomainRequest){let a=new ze.XDomainRequest;return this.xdomainRequest(a,e,t,r,n,s,o)}else{let a=new ze.XMLHttpRequest;return this.xhrRequest(a,e,t,i,r,n,s,o)}}static xdomainRequest(e,t,i,r,n,s,o){return e.timeout=n,e.open(t,i),e.onload=()=>{let a=this.parseJSON(e.responseText);o&&o(a)},s&&(e.ontimeout=s),e.onprogress=()=>{},e.send(r),e}static xhrRequest(e,t,i,r,n,s,o,a){return e.open(t,i,!0),e.timeout=s,e.setRequestHeader("Content-Type",r),e.onerror=()=>a&&a(null),e.onreadystatechange=()=>{if(e.readyState===Bn.complete&&a){let l=this.parseJSON(e.responseText);a(l)}},o&&(e.ontimeout=o),e.send(n),e}static parseJSON(e){if(!e||e==="")return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}static serialize(e,t){let i=[];for(var r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;let n=t?`${t}[${r}]`:r,s=e[r];typeof s=="object"?i.push(this.serialize(s,n)):i.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}return i.join("&")}static appendParams(e,t){if(Object.keys(t).length===0)return e;let i=e.match(/\?/)?"&":"?";return`${e}${i}${this.serialize(t)}`}},jn=e=>{let t="",i=new Uint8Array(e),r=i.byteLength;for(let n=0;n<r;n++)t+=String.fromCharCode(i[n]);return btoa(t)},ot=class{constructor(e){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.awaitingBatchAck=!1,this.currentBatch=null,this.currentBatchTimer=null,this.batchBuffer=[],this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=we.connecting,setTimeout(()=>this.poll(),0)}normalizeEndpoint(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+ai.websocket),"$1/"+ai.longpoll)}endpointURL(){return It.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(e,t,i){this.close(e,t,i),this.readyState=we.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===we.open||this.readyState===we.connecting}poll(){this.ajax("GET","application/json",null,()=>this.ontimeout(),e=>{if(e){var{status:t,token:i,messages:r}=e;this.token=i}else t=0;switch(t){case 200:r.forEach(n=>{setTimeout(()=>this.onmessage({data:n}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=we.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${t}`)}})}send(e){typeof e!="string"&&(e=jn(e)),this.currentBatch?this.currentBatch.push(e):this.awaitingBatchAck?this.batchBuffer.push(e):(this.currentBatch=[e],this.currentBatchTimer=setTimeout(()=>{this.batchSend(this.currentBatch),this.currentBatch=null},0))}batchSend(e){this.awaitingBatchAck=!0,this.ajax("POST","application/x-ndjson",e.join(`
`),()=>this.onerror("timeout"),t=>{this.awaitingBatchAck=!1,!t||t.status!==200?(this.onerror(t&&t.status),this.closeAndRetry(1011,"internal server error",!1)):this.batchBuffer.length>0&&(this.batchSend(this.batchBuffer),this.batchBuffer=[])})}close(e,t,i){for(let n of this.reqs)n.abort();this.readyState=we.closed;let r=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:e,reason:t,wasClean:i});this.batchBuffer=[],clearTimeout(this.currentBatchTimer),this.currentBatchTimer=null,typeof CloseEvent!="undefined"?this.onclose(new CloseEvent("close",r)):this.onclose(r)}ajax(e,t,i,r,n){let s,o=()=>{this.reqs.delete(s),r()};s=It.request(e,this.endpointURL(),t,i,this.timeout,o,a=>{this.reqs.delete(s),this.isActive()&&n(a)}),this.reqs.add(s)}};var Ot={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(e,t){if(e.payload.constructor===ArrayBuffer)return t(this.binaryEncode(e));{let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(i))}},decode(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));{let[i,r,n,s,o]=JSON.parse(e);return t({join_ref:i,ref:r,topic:n,event:s,payload:o})}},binaryEncode(e){let{join_ref:t,ref:i,event:r,topic:n,payload:s}=e,o=this.META_LENGTH+t.length+i.length+n.length+r.length,a=new ArrayBuffer(this.HEADER_LENGTH+o),l=new DataView(a),h=0;l.setUint8(h++,this.KINDS.push),l.setUint8(h++,t.length),l.setUint8(h++,i.length),l.setUint8(h++,n.length),l.setUint8(h++,r.length),Array.from(t,p=>l.setUint8(h++,p.charCodeAt(0))),Array.from(i,p=>l.setUint8(h++,p.charCodeAt(0))),Array.from(n,p=>l.setUint8(h++,p.charCodeAt(0))),Array.from(r,p=>l.setUint8(h++,p.charCodeAt(0)));var d=new Uint8Array(a.byteLength+s.byteLength);return d.set(new Uint8Array(a),0),d.set(new Uint8Array(s),a.byteLength),d.buffer},binaryDecode(e){let t=new DataView(e),i=t.getUint8(0),r=new TextDecoder;switch(i){case this.KINDS.push:return this.decodePush(e,t,r);case this.KINDS.reply:return this.decodeReply(e,t,r);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,r)}},decodePush(e,t,i){let r=t.getUint8(1),n=t.getUint8(2),s=t.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,a=i.decode(e.slice(o,o+r));o=o+r;let l=i.decode(e.slice(o,o+n));o=o+n;let h=i.decode(e.slice(o,o+s));o=o+s;let d=e.slice(o,e.byteLength);return{join_ref:a,ref:null,topic:l,event:h,payload:d}},decodeReply(e,t,i){let r=t.getUint8(1),n=t.getUint8(2),s=t.getUint8(3),o=t.getUint8(4),a=this.HEADER_LENGTH+this.META_LENGTH,l=i.decode(e.slice(a,a+r));a=a+r;let h=i.decode(e.slice(a,a+n));a=a+n;let d=i.decode(e.slice(a,a+s));a=a+s;let p=i.decode(e.slice(a,a+o));a=a+o;let v=e.slice(a,e.byteLength),u={status:p,response:v};return{join_ref:l,ref:h,topic:d,event:Se.reply,payload:u}},decodeBroadcast(e,t,i){let r=t.getUint8(1),n=t.getUint8(2),s=this.HEADER_LENGTH+2,o=i.decode(e.slice(s,s+r));s=s+r;let a=i.decode(e.slice(s,s+n));s=s+n;let l=e.slice(s,e.byteLength);return{join_ref:null,ref:null,topic:o,event:a,payload:l}}},or=class{constructor(e,t={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=t.timeout||Nn,this.transport=t.transport||ze.WebSocket||ot,this.primaryPassedHealthCheck=!1,this.longPollFallbackMs=t.longPollFallbackMs,this.fallbackTimer=null,this.sessionStore=t.sessionStorage||ze.sessionStorage,this.establishedConnections=0,this.defaultEncoder=Ot.encode.bind(Ot),this.defaultDecoder=Ot.decode.bind(Ot),this.closeWasClean=!1,this.binaryType=t.binaryType||"arraybuffer",this.connectClock=1,this.transport!==ot?(this.encode=t.encode||this.defaultEncoder,this.decode=t.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let i=null;at&&at.addEventListener&&(at.addEventListener("pagehide",r=>{this.conn&&(this.disconnect(),i=this.connectClock)}),at.addEventListener("pageshow",r=>{i===this.connectClock&&(i=null,this.connect())})),this.heartbeatIntervalMs=t.heartbeatIntervalMs||3e4,this.rejoinAfterMs=r=>t.rejoinAfterMs?t.rejoinAfterMs(r):[1e3,2e3,5e3][r-1]||1e4,this.reconnectAfterMs=r=>t.reconnectAfterMs?t.reconnectAfterMs(r):[10,50,100,150,200,250,500,1e3,2e3][r-1]||5e3,this.logger=t.logger||null,!this.logger&&t.debug&&(this.logger=(r,n,s)=>{console.log(`${r}: ${n}`,s)}),this.longpollerTimeout=t.longpollerTimeout||2e4,this.params=lt(t.params||{}),this.endPoint=`${e}/${ai.websocket}`,this.vsn=t.vsn||Mn,this.heartbeatTimeoutTimer=null,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new sr(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}getLongPollTransport(){return ot}replaceTransport(e){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.conn&&(this.conn.close(),this.conn=null),this.transport=e}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let e=It.appendParams(It.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return e.charAt(0)!=="/"?e:e.charAt(1)==="/"?`${this.protocol()}:${e}`:`${this.protocol()}://${location.host}${e}`}disconnect(e,t,i){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.teardown(e,t,i)}connect(e){e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=lt(e)),!this.conn&&(this.longPollFallbackMs&&this.transport!==ot?this.connectWithFallback(ot,this.longPollFallbackMs):this.transportConnect())}log(e,t,i){this.logger&&this.logger(e,t,i)}hasLogger(){return this.logger!==null}onOpen(e){let t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}onClose(e){let t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}onError(e){let t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}onMessage(e){let t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}ping(e){if(!this.isConnected())return!1;let t=this.makeRef(),i=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:t});let r=this.onMessage(n=>{n.ref===t&&(this.off([r]),e(Date.now()-i))});return!0}transportConnect(){this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=e=>this.onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this.onConnClose(e)}getSession(e){return this.sessionStore&&this.sessionStore.getItem(e)}storeSession(e,t){this.sessionStore&&this.sessionStore.setItem(e,t)}connectWithFallback(e,t=2500){clearTimeout(this.fallbackTimer);let i=!1,r=!0,n,s,o=a=>{this.log("transport",`falling back to ${e.name}...`,a),this.off([n,s]),r=!1,this.replaceTransport(e),this.transportConnect()};if(this.getSession(`phx:fallback:${e.name}`))return o("memorized");this.fallbackTimer=setTimeout(o,t),s=this.onError(a=>{this.log("transport","error",a),r&&!i&&(clearTimeout(this.fallbackTimer),o(a))}),this.onOpen(()=>{if(i=!0,!r)return this.primaryPassedHealthCheck||this.storeSession(`phx:fallback:${e.name}`,"true"),this.log("transport",`established ${e.name} fallback`);clearTimeout(this.fallbackTimer),this.fallbackTimer=setTimeout(o,t),this.ping(a=>{this.log("transport","connected to primary after",a),this.primaryPassedHealthCheck=!0,clearTimeout(this.fallbackTimer)})}),this.transportConnect()}clearHeartbeats(){clearTimeout(this.heartbeatTimer),clearTimeout(this.heartbeatTimeoutTimer)}onConnOpen(){this.hasLogger()&&this.log("transport",`${this.transport.name} connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,e])=>e())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.triggerChanError(),this.closeWasClean=!1,this.teardown(()=>this.reconnectTimer.scheduleTimeout(),Fn,"heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,this.clearHeartbeats(),this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(e,t,i){if(!this.conn)return e&&e();this.waitForBufferDone(()=>{this.conn&&(t?this.conn.close(t,i||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onopen=function(){},this.conn.onerror=function(){},this.conn.onmessage=function(){},this.conn.onclose=function(){},this.conn=null),e&&e()})})}waitForBufferDone(e,t=1){if(t===5||!this.conn||!this.conn.bufferedAmount){e();return}setTimeout(()=>{this.waitForBufferDone(e,t+1)},150*t)}waitForSocketClosed(e,t=1){if(t===5||!this.conn||this.conn.readyState===we.closed){e();return}setTimeout(()=>{this.waitForSocketClosed(e,t+1)},150*t)}onConnClose(e){let t=e&&e.code;this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),this.clearHeartbeats(),!this.closeWasClean&&t!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,i])=>i(e))}onConnError(e){this.hasLogger()&&this.log("transport",e);let t=this.transport,i=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,r])=>{r(e,t,i)}),(t===this.transport||i>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(e=>{e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(Se.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case we.connecting:return"connecting";case we.open:return"open";case we.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(t=>t!==e)}off(e){for(let t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(([i])=>e.indexOf(i)===-1)}channel(e,t={}){let i=new $n(e,t,this);return this.channels.push(i),i}push(e){if(this.hasLogger()){let{topic:t,event:i,payload:r,ref:n,join_ref:s}=e;this.log("push",`${t} ${i} (${s}, ${n})`,r)}this.isConnected()?this.encode(e,t=>this.conn.send(t)):this.sendBuffer.push(()=>this.encode(e,t=>this.conn.send(t)))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimeoutTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:r,payload:n,ref:s,join_ref:o}=t;s&&s===this.pendingHeartbeatRef&&(this.clearHeartbeats(),this.pendingHeartbeatRef=null,this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${n.status||""} ${i} ${r} ${s&&"("+s+")"||""}`,n);for(let a=0;a<this.channels.length;a++){let l=this.channels[a];!l.isMember(i,r,n,o)||l.trigger(r,n,s,o)}for(let a=0;a<this.stateChangeCallbacks.message.length;a++){let[,l]=this.stateChangeCallbacks.message[a];l(t)}})}leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i.isJoined()||i.isJoining()));t&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${e}"`),t.leave())}};var Lr="consecutive-reloads",Un=10,Vn=5e3,Wn=1e4,Jn=3e4,Rr=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading"],de="data-phx-component",li="data-phx-link",qn="track-static",Xn="data-phx-link-state",ue="data-phx-ref",Me="data-phx-ref-src",Or="track-uploads",Ne="data-phx-upload-ref",Ei="data-phx-preflighted-refs",zn="data-phx-done-refs",ar="drop-target",yi="data-phx-active-refs",Wt="phx:live-file:updated",wi="data-phx-skip",lr="data-phx-prune",hr="page-loading",dr="phx-connected",ht="phx-loading",hi="phx-no-feedback",Dt="phx-error",cr="phx-client-error",di="phx-server-error",Ke="data-phx-parent-id",Si="data-phx-main",bt="data-phx-root-id",Ir="viewport-top",Dr="viewport-bottom",Kn="trigger-action",qt="feedback-for",xi="phx-has-focused",Gn=["text","textarea","number","email","password","search","tel","url","date","time","datetime-local","color","range"],Hr=["checkbox","radio"],Xt="phx-has-submitted",Oe="data-phx-session",Ye=`[${Oe}]`,ur="data-phx-sticky",gt="data-phx-static",ci="data-phx-readonly",Ht="data-phx-disabled",Ai="disable-with",Mt="data-phx-disable-with-restore",dt="hook",Yn="debounce",Qn="throttle",zt="update",ui="stream",ct="data-phx-stream",Zn="key",xe="phxPrivate",fr="auto-recover",Nt="phx:live-socket:debug",fi="phx:live-socket:profiling",pi="phx:live-socket:latency-sim",es="progress",pr="mounted",ts=1,is=200,rs="phx-",ns=3e4,ut="debounce-trigger",Ft="throttled",mr="debounce-prev-key",ss={debounce:300,throttle:300},mi="d",Ae="s",he="c",gr="e",vr="r",br="t",os="p",yr="stream",as=class{constructor(e,t,i){this.liveSocket=i,this.entry=e,this.offset=0,this.chunkSize=t,this.chunkTimer=null,this.errored=!1,this.uploadChannel=i.channel(`lvu:${e.ref}`,{token:e.metadata()})}error(e){this.errored||(this.errored=!0,clearTimeout(this.chunkTimer),this.entry.error(e))}upload(){this.uploadChannel.onError(e=>this.error(e)),this.uploadChannel.join().receive("ok",e=>this.readNextChunk()).receive("error",e=>this.error(e))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){let e=new window.FileReader,t=this.entry.file.slice(this.offset,this.chunkSize+this.offset);e.onload=i=>{if(i.target.error===null)this.offset+=i.target.result.byteLength,this.pushChunk(i.target.result);else return te("Read error: "+i.target.error)},e.readAsArrayBuffer(t)}pushChunk(e){!this.uploadChannel.isJoined()||this.uploadChannel.push("chunk",e).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))}).receive("error",({reason:t})=>this.error(t))}},te=(e,t)=>console.error&&console.error(e,t),Le=e=>{let t=typeof e;return t==="number"||t==="string"&&/^(0|[1-9]\d*)$/.test(e)};function ls(){let e=new Set,t=document.querySelectorAll("*[id]");for(let i=0,r=t.length;i<r;i++)e.has(t[i].id)?console.error(`Multiple IDs detected: ${t[i].id}. Ensure unique element ids.`):e.add(t[i].id)}var hs=(e,t,i,r)=>{e.liveSocket.isDebugEnabled()&&console.log(`${e.id} ${t}: ${i} - `,r)},gi=e=>typeof e=="function"?e:function(){return e},Jt=e=>JSON.parse(JSON.stringify(e)),vt=(e,t,i)=>{do{if(e.matches(`[${t}]`)&&!e.disabled)return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1&&!(i&&i.isSameNode(e)||e.matches(Ye)));return null},ft=e=>e!==null&&typeof e=="object"&&!(e instanceof Array),ds=(e,t)=>JSON.stringify(e)===JSON.stringify(t),wr=e=>{for(let t in e)return!1;return!0},Re=(e,t)=>e&&t(e),cs=function(e,t,i,r){e.forEach(n=>{new as(n,i.config.chunk_size,r).upload()})},Mr={canPushState(){return typeof history.pushState!="undefined"},dropLocal(e,t,i){return e.removeItem(this.localKey(t,i))},updateLocal(e,t,i,r,n){let s=this.getLocal(e,t,i),o=this.localKey(t,i),a=s===null?r:n(s);return e.setItem(o,JSON.stringify(a)),a},getLocal(e,t,i){return JSON.parse(e.getItem(this.localKey(t,i)))},updateCurrentState(e){!this.canPushState()||history.replaceState(e(history.state||{}),"",window.location.href)},pushState(e,t,i){if(this.canPushState()){if(i!==window.location.href){if(t.type=="redirect"&&t.scroll){let n=history.state||{};n.scroll=t.scroll,history.replaceState(n,"",window.location.href)}delete t.scroll,history[e+"State"](t,"",i||null);let r=this.getHashTargetEl(window.location.hash);r?r.scrollIntoView():t.type==="redirect"&&window.scroll(0,0)}}else this.redirect(i)},setCookie(e,t){document.cookie=`${e}=${t}`},getCookie(e){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${e}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(e,t){t&&Mr.setCookie("__phoenix_flash__",t+"; max-age=60000; path=/"),window.location=e},localKey(e,t){return`${e}-${t}`},getHashTargetEl(e){let t=e.toString().substring(1);if(t!=="")return document.getElementById(t)||document.querySelector(`a[name="${t}"]`)}},Ee=Mr,ce={byId(e){return document.getElementById(e)||te(`no id found for ${e}`)},removeClass(e,t){e.classList.remove(t),e.classList.length===0&&e.removeAttribute("class")},all(e,t,i){if(!e)return[];let r=Array.from(e.querySelectorAll(t));return i?r.forEach(i):r},childNodeLength(e){let t=document.createElement("template");return t.innerHTML=e,t.content.childElementCount},isUploadInput(e){return e.type==="file"&&e.getAttribute(Ne)!==null},findUploadInputs(e){return this.all(e,`input[type="file"][${Ne}]`)},findComponentNodeList(e,t){return this.filterWithinSameLiveView(this.all(e,`[${de}="${t}"]`),e)},isPhxDestroyed(e){return!!(e.id&&ce.private(e,"destroyed"))},wantsNewTab(e){let t=e.ctrlKey||e.shiftKey||e.metaKey||e.button&&e.button===1,i=e.target instanceof HTMLAnchorElement&&e.target.hasAttribute("download"),r=e.target.hasAttribute("target")&&e.target.getAttribute("target").toLowerCase()==="_blank";return t||r||i},isUnloadableFormSubmit(e){return!e.defaultPrevented&&!this.wantsNewTab(e)},isNewPageClick(e,t){let i=e.target instanceof HTMLAnchorElement?e.target.getAttribute("href"):null,r;if(e.defaultPrevented||i===null||this.wantsNewTab(e)||i.startsWith("mailto:")||i.startsWith("tel:"))return!1;try{r=new URL(i)}catch(n){try{r=new URL(i,t)}catch(s){return!0}}return r.host===t.host&&r.protocol===t.protocol&&r.pathname===t.pathname&&r.search===t.search?r.hash===""&&!r.href.endsWith("#"):r.protocol.startsWith("http")},markPhxChildDestroyed(e){this.isPhxChild(e)&&e.setAttribute(Oe,""),this.putPrivate(e,"destroyed",!0)},findPhxChildrenInFragment(e,t){let i=document.createElement("template");return i.innerHTML=e,this.findPhxChildren(i.content,t)},isIgnored(e,t){return(e.getAttribute(t)||e.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(e,t,i){return e.getAttribute&&i.indexOf(e.getAttribute(t))>=0},findPhxSticky(e){return this.all(e,`[${ur}]`)},findPhxChildren(e,t){return this.all(e,`${Ye}[${Ke}="${t}"]`)},findParentCIDs(e,t){let i=new Set(t),r=t.reduce((n,s)=>{let o=`[${de}="${s}"] [${de}]`;return this.filterWithinSameLiveView(this.all(e,o),e).map(a=>parseInt(a.getAttribute(de))).forEach(a=>n.delete(a)),n},i);return r.size===0?new Set(t):r},filterWithinSameLiveView(e,t){return t.querySelector(Ye)?e.filter(i=>this.withinSameLiveView(i,t)):e},withinSameLiveView(e,t){for(;e=e.parentNode;){if(e.isSameNode(t))return!0;if(e.getAttribute(Oe)!==null)return!1}},private(e,t){return e[xe]&&e[xe][t]},deletePrivate(e,t){e[xe]&&delete e[xe][t]},putPrivate(e,t,i){e[xe]||(e[xe]={}),e[xe][t]=i},updatePrivate(e,t,i,r){let n=this.private(e,t);n===void 0?this.putPrivate(e,t,r(i)):this.putPrivate(e,t,r(n))},copyPrivates(e,t){t[xe]&&(e[xe]=t[xe])},putTitle(e){let t=document.querySelector("title");if(t){let{prefix:i,suffix:r}=t.dataset;document.title=`${i||""}${e}${r||""}`}else document.title=e},debounce(e,t,i,r,n,s,o,a){let l=e.getAttribute(i),h=e.getAttribute(n);l===""&&(l=r),h===""&&(h=s);let d=l||h;switch(d){case null:return a();case"blur":this.once(e,"debounce-blur")&&e.addEventListener("blur",()=>a());return;default:let p=parseInt(d),v=()=>h?this.deletePrivate(e,Ft):a(),u=this.incCycle(e,ut,v);if(isNaN(p))return te(`invalid throttle/debounce value: ${d}`);if(h){let g=!1;if(t.type==="keydown"){let w=this.private(e,mr);this.putPrivate(e,mr,t.key),g=w!==t.key}if(!g&&this.private(e,Ft))return!1;a(),this.putPrivate(e,Ft,!0),setTimeout(()=>{o()&&this.triggerCycle(e,ut)},p)}else setTimeout(()=>{o()&&this.triggerCycle(e,ut,u)},p);let m=e.form;m&&this.once(m,"bind-debounce")&&m.addEventListener("submit",()=>{Array.from(new FormData(m).entries(),([g])=>{let w=m.querySelector(`[name="${g}"]`);this.incCycle(w,ut),this.deletePrivate(w,Ft)})}),this.once(e,"bind-debounce")&&e.addEventListener("blur",()=>this.triggerCycle(e,ut))}},triggerCycle(e,t,i){let[r,n]=this.private(e,t);i||(i=r),i===r&&(this.incCycle(e,t),n())},once(e,t){return this.private(e,t)===!0?!1:(this.putPrivate(e,t,!0),!0)},incCycle(e,t,i=function(){}){let[r]=this.private(e,t)||[0,i];return r++,this.putPrivate(e,t,[r,i]),r},maybeAddPrivateHooks(e,t,i){e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute(i))&&e.setAttribute("data-phx-hook","Phoenix.InfiniteScroll")},maybeHideFeedback(e,t,i){if(!(this.private(t,xi)||this.private(t,Xt))){let r=[t.name];t.name.endsWith("[]")&&r.push(t.name.slice(0,-2));let n=r.map(s=>`[${i}="${s}"]`).join(", ");ce.all(e,n,s=>s.classList.add(hi))}},resetForm(e,t){Array.from(e.elements).forEach(i=>{let r=`[${t}="${i.id}"],
                   [${t}="${i.name}"],
                   [${t}="${i.name.replace(/\[\]$/,"")}"]`;this.deletePrivate(i,xi),this.deletePrivate(i,Xt),this.all(document,r,n=>{n.classList.add(hi)})})},showError(e,t){(e.id||e.name)&&this.all(e.form,`[${t}="${e.id}"], [${t}="${e.name}"]`,i=>{this.removeClass(i,hi)})},isPhxChild(e){return e.getAttribute&&e.getAttribute(Ke)},isPhxSticky(e){return e.getAttribute&&e.getAttribute(ur)!==null},firstPhxChild(e){return this.isPhxChild(e)?e:this.all(e,`[${Ke}]`)[0]},dispatchEvent(e,t,i={}){let n={bubbles:i.bubbles===void 0?!0:!!i.bubbles,cancelable:!0,detail:i.detail||{}},s=t==="click"?new MouseEvent("click",n):new CustomEvent(t,n);e.dispatchEvent(s)},cloneNode(e,t){if(typeof t=="undefined")return e.cloneNode(!0);{let i=e.cloneNode(!1);return i.innerHTML=t,i}},mergeAttrs(e,t,i={}){let r=i.exclude||[],n=i.isIgnored,s=t.attributes;for(let a=s.length-1;a>=0;a--){let l=s[a].name;r.indexOf(l)<0&&e.setAttribute(l,t.getAttribute(l))}let o=e.attributes;for(let a=o.length-1;a>=0;a--){let l=o[a].name;n?l.startsWith("data-")&&!t.hasAttribute(l)&&e.removeAttribute(l):t.hasAttribute(l)||e.removeAttribute(l)}},mergeFocusedInput(e,t){e instanceof HTMLSelectElement||ce.mergeAttrs(e,t,{exclude:["value"]}),t.readOnly?e.setAttribute("readonly",!0):e.removeAttribute("readonly")},hasSelectionRange(e){return e.setSelectionRange&&(e.type==="text"||e.type==="textarea")},restoreFocus(e,t,i){if(!ce.isTextualInput(e))return;let r=e.matches(":focus");e.readOnly&&e.blur(),r||e.focus(),this.hasSelectionRange(e)&&e.setSelectionRange(t,i)},isFormInput(e){return/^(?:input|select|textarea)$/i.test(e.tagName)&&e.type!=="button"},syncAttrsToProps(e){e instanceof HTMLInputElement&&Hr.indexOf(e.type.toLocaleLowerCase())>=0&&(e.checked=e.getAttribute("checked")!==null)},isTextualInput(e){return Gn.indexOf(e.type)>=0},isNowTriggerFormExternal(e,t){return e.getAttribute&&e.getAttribute(t)!==null},syncPendingRef(e,t,i){let r=e.getAttribute(ue);if(r===null)return!0;let n=e.getAttribute(Me);return ce.isFormInput(e)||e.getAttribute(i)!==null?(ce.isUploadInput(e)&&ce.mergeAttrs(e,t,{isIgnored:!0}),ce.putPrivate(e,ue,t),!1):(Rr.forEach(s=>{e.classList.contains(s)&&t.classList.add(s)}),t.setAttribute(ue,r),t.setAttribute(Me,n),!0)},cleanChildNodes(e,t){if(ce.isPhxUpdate(e,t,["append","prepend"])){let i=[];e.childNodes.forEach(r=>{r.id||(r.nodeType===Node.TEXT_NODE&&r.nodeValue.trim()===""||te(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(r.outerHTML||r.nodeValue).trim()}"

`),i.push(r))}),i.forEach(r=>r.remove())}},replaceRootContainer(e,t,i){let r=new Set(["id",Oe,gt,Si,bt]);if(e.tagName.toLowerCase()===t.toLowerCase())return Array.from(e.attributes).filter(n=>!r.has(n.name.toLowerCase())).forEach(n=>e.removeAttribute(n.name)),Object.keys(i).filter(n=>!r.has(n.toLowerCase())).forEach(n=>e.setAttribute(n,i[n])),e;{let n=document.createElement(t);return Object.keys(i).forEach(s=>n.setAttribute(s,i[s])),r.forEach(s=>n.setAttribute(s,e.getAttribute(s))),n.innerHTML=e.innerHTML,e.replaceWith(n),n}},getSticky(e,t,i){let r=(ce.private(e,"sticky")||[]).find(([n])=>t===n);if(r){let[n,s,o]=r;return o}else return typeof i=="function"?i():i},deleteSticky(e,t){this.updatePrivate(e,"sticky",[],i=>i.filter(([r,n])=>r!==t))},putSticky(e,t,i){let r=i(e);this.updatePrivate(e,"sticky",[],n=>{let s=n.findIndex(([o])=>t===o);return s>=0?n[s]=[t,i,r]:n.push([t,i,r]),n})},applyStickyOperations(e){let t=ce.private(e,"sticky");!t||t.forEach(([i,r,n])=>this.putSticky(e,i,r))}},f=ce,vi=class{static isActive(e,t){let i=t._phxRef===void 0,n=e.getAttribute(yi).split(",").indexOf(ee.genFileRef(t))>=0;return t.size>0&&(i||n)}static isPreflighted(e,t){return e.getAttribute(Ei).split(",").indexOf(ee.genFileRef(t))>=0&&this.isActive(e,t)}constructor(e,t,i){this.ref=ee.genFileRef(t),this.fileEl=e,this.file=t,this.view=i,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(Wt,this._onElUpdated)}metadata(){return this.meta}progress(e){this._progress=Math.floor(e),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{ee.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}cancel(){this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(e="failed"){this.fileEl.removeEventListener(Wt,this._onElUpdated),this.view.pushFileProgress(this.fileEl,this.ref,{error:e}),ee.clearFiles(this.fileEl)}onDone(e){this._onDone=()=>{this.fileEl.removeEventListener(Wt,this._onElUpdated),e()}}onElUpdated(){this.fileEl.getAttribute(yi).split(",").indexOf(this.ref)===-1&&this.cancel()}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,relative_path:this.file.webkitRelativePath,size:this.file.size,type:this.file.type,ref:this.ref}}uploader(e){if(this.meta.uploader){let t=e[this.meta.uploader]||te(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:t}}else return{name:"channel",callback:cs}}zipPostFlight(e){this.meta=e.entries[this.ref],this.meta||te(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:e})}},us=0,ee=class{static genFileRef(e){let t=e._phxRef;return t!==void 0?t:(e._phxRef=(us++).toString(),e._phxRef)}static getEntryDataURL(e,t,i){let r=this.activeFiles(e).find(n=>this.genFileRef(n)===t);i(URL.createObjectURL(r))}static hasUploadsInProgress(e){let t=0;return f.findUploadInputs(e).forEach(i=>{i.getAttribute(Ei)!==i.getAttribute(zn)&&t++}),t>0}static serializeUploads(e){let t=this.activeFiles(e),i={};return t.forEach(r=>{let n={path:e.name},s=e.getAttribute(Ne);i[s]=i[s]||[],n.ref=this.genFileRef(r),n.last_modified=r.lastModified,n.name=r.name||n.ref,n.relative_path=r.webkitRelativePath,n.type=r.type,n.size=r.size,i[s].push(n)}),i}static clearFiles(e){e.value=null,e.removeAttribute(Ne),f.putPrivate(e,"files",[])}static untrackFile(e,t){f.putPrivate(e,"files",f.private(e,"files").filter(i=>!Object.is(i,t)))}static trackFiles(e,t,i){if(e.getAttribute("multiple")!==null){let r=t.filter(n=>!this.activeFiles(e).find(s=>Object.is(s,n)));f.putPrivate(e,"files",this.activeFiles(e).concat(r)),e.value=null}else i&&i.files.length>0&&(e.files=i.files),f.putPrivate(e,"files",t)}static activeFileInputs(e){let t=f.findUploadInputs(e);return Array.from(t).filter(i=>i.files&&this.activeFiles(i).length>0)}static activeFiles(e){return(f.private(e,"files")||[]).filter(t=>vi.isActive(e,t))}static inputsAwaitingPreflight(e){let t=f.findUploadInputs(e);return Array.from(t).filter(i=>this.filesAwaitingPreflight(i).length>0)}static filesAwaitingPreflight(e){return this.activeFiles(e).filter(t=>!vi.isPreflighted(e,t))}constructor(e,t,i){this.view=t,this.onComplete=i,this._entries=Array.from(ee.filesAwaitingPreflight(e)||[]).map(r=>new vi(e,r,t)),this.numEntriesInProgress=this._entries.length}entries(){return this._entries}initAdapterUpload(e,t,i){this._entries=this._entries.map(n=>(n.zipPostFlight(e),n.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()}),n));let r=this._entries.reduce((n,s)=>{let{name:o,callback:a}=s.uploader(i.uploaders);return n[o]=n[o]||{callback:a,entries:[]},n[o].entries.push(s),n},{});for(let n in r){let{callback:s,entries:o}=r[n];s(o,t,e,i)}}},fs={focusMain(){let e=document.querySelector("main h1, main, h1");if(e){let t=e.tabIndex;e.tabIndex=-1,e.focus(),e.tabIndex=t}},anyOf(e,t){return t.find(i=>e instanceof i)},isFocusable(e,t){return e instanceof HTMLAnchorElement&&e.rel!=="ignore"||e instanceof HTMLAreaElement&&e.href!==void 0||!e.disabled&&this.anyOf(e,[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement])||e instanceof HTMLIFrameElement||e.tabIndex>0||!t&&e.tabIndex===0&&e.getAttribute("tabindex")!==null&&e.getAttribute("aria-hidden")!=="true"},attemptFocus(e,t){if(this.isFocusable(e,t))try{e.focus()}catch(i){}return!!document.activeElement&&document.activeElement.isSameNode(e)},focusFirstInteractive(e){let t=e.firstElementChild;for(;t;){if(this.attemptFocus(t,!0)||this.focusFirstInteractive(t,!0))return!0;t=t.nextElementSibling}},focusFirst(e){let t=e.firstElementChild;for(;t;){if(this.attemptFocus(t)||this.focusFirst(t))return!0;t=t.nextElementSibling}},focusLast(e){let t=e.lastElementChild;for(;t;){if(this.attemptFocus(t)||this.focusLast(t))return!0;t=t.previousElementSibling}}},Ge=fs,Nr={LiveFileUpload:{activeRefs(){return this.el.getAttribute(yi)},preflightedRefs(){return this.el.getAttribute(Ei)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){let e=this.preflightedRefs();this.preflightedWas!==e&&(this.preflightedWas=e,e===""&&this.__view.cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(Wt))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(Ne)),ee.getEntryDataURL(this.inputEl,this.ref,e=>{this.url=e,this.el.src=e})},destroyed(){URL.revokeObjectURL(this.url)}},FocusWrap:{mounted(){this.focusStart=this.el.firstElementChild,this.focusEnd=this.el.lastElementChild,this.focusStart.addEventListener("focus",()=>Ge.focusLast(this.el)),this.focusEnd.addEventListener("focus",()=>Ge.focusFirst(this.el)),this.el.addEventListener("phx:show-end",()=>this.el.focus()),window.getComputedStyle(this.el).display!=="none"&&Ge.focusFirst(this.el)}}},xr=()=>document.documentElement.scrollTop||document.body.scrollTop,ki=()=>window.innerHeight||document.documentElement.clientHeight,ps=e=>{let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.top<=ki()},ms=e=>{let t=e.getBoundingClientRect();return t.right>=0&&t.left>=0&&t.bottom<=ki()},Ar=e=>{let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.top<=ki()};Nr.InfiniteScroll={mounted(){let e=xr(),t=!1,i=500,r=null,n=this.throttle(i,(a,l)=>{r=()=>!0,this.liveSocket.execJSHookPush(this.el,a,{id:l.id,_overran:!0},()=>{r=null})}),s=this.throttle(i,(a,l)=>{r=()=>l.scrollIntoView({block:"start"}),this.liveSocket.execJSHookPush(this.el,a,{id:l.id},()=>{r=null,Ar(l)||l.scrollIntoView({block:"start"})})}),o=this.throttle(i,(a,l)=>{r=()=>l.scrollIntoView({block:"end"}),this.liveSocket.execJSHookPush(this.el,a,{id:l.id},()=>{r=null,Ar(l)||l.scrollIntoView({block:"end"})})});this.onScroll=a=>{let l=xr();if(r)return e=l,r();let h=this.el.getBoundingClientRect(),d=this.el.getAttribute(this.liveSocket.binding("viewport-top")),p=this.el.getAttribute(this.liveSocket.binding("viewport-bottom")),v=this.el.lastElementChild,u=this.el.firstElementChild,m=l<e,g=l>e;m&&d&&!t&&h.top>=0?(t=!0,n(d,u)):g&&t&&h.top<=0&&(t=!1),d&&m&&ps(u)?s(d,u):p&&g&&ms(v)&&o(p,v),e=l},window.addEventListener("scroll",this.onScroll)},destroyed(){window.removeEventListener("scroll",this.onScroll)},throttle(e,t){let i=0,r;return(...n)=>{let s=Date.now(),o=e-(s-i);o<=0||o>e?(r&&(clearTimeout(r),r=null),i=s,t(...n)):r||(r=setTimeout(()=>{i=Date.now(),r=null,t(...n)},o))}}};var gs=Nr,vs=class{constructor(e,t,i){let r=new Set,n=new Set([...t.children].map(o=>o.id)),s=[];Array.from(e.children).forEach(o=>{if(o.id&&(r.add(o.id),n.has(o.id))){let a=o.previousElementSibling&&o.previousElementSibling.id;s.push({elementId:o.id,previousElementId:a})}}),this.containerId=t.id,this.updateType=i,this.elementsToModify=s,this.elementIdsToAdd=[...n].filter(o=>!r.has(o))}perform(){let e=f.byId(this.containerId);this.elementsToModify.forEach(t=>{t.previousElementId?Re(document.getElementById(t.previousElementId),i=>{Re(document.getElementById(t.elementId),r=>{r.previousElementSibling&&r.previousElementSibling.id==i.id||i.insertAdjacentElement("afterend",r)})}):Re(document.getElementById(t.elementId),i=>{i.previousElementSibling==null||e.insertAdjacentElement("afterbegin",i)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(t=>{Re(document.getElementById(t),i=>e.insertAdjacentElement("afterbegin",i))})}},Er=11;function bs(e,t){var i=t.attributes,r,n,s,o,a;if(!(t.nodeType===Er||e.nodeType===Er)){for(var l=i.length-1;l>=0;l--)r=i[l],n=r.name,s=r.namespaceURI,o=r.value,s?(n=r.localName||n,a=e.getAttributeNS(s,n),a!==o&&(r.prefix==="xmlns"&&(n=r.name),e.setAttributeNS(s,n,o))):(a=e.getAttribute(n),a!==o&&e.setAttribute(n,o));for(var h=e.attributes,d=h.length-1;d>=0;d--)r=h[d],n=r.name,s=r.namespaceURI,s?(n=r.localName||n,t.hasAttributeNS(s,n)||e.removeAttributeNS(s,n)):t.hasAttribute(n)||e.removeAttribute(n)}}var Bt,ys="http://www.w3.org/1999/xhtml",se=typeof document=="undefined"?void 0:document,ws=!!se&&"content"in se.createElement("template"),xs=!!se&&se.createRange&&"createContextualFragment"in se.createRange();function As(e){var t=se.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function Es(e){Bt||(Bt=se.createRange(),Bt.selectNode(se.body));var t=Bt.createContextualFragment(e);return t.childNodes[0]}function Ss(e){var t=se.createElement("body");return t.innerHTML=e,t.childNodes[0]}function ks(e){return e=e.trim(),ws?As(e):xs?Es(e):Ss(e)}function $t(e,t){var i=e.nodeName,r=t.nodeName,n,s;return i===r?!0:(n=i.charCodeAt(0),s=r.charCodeAt(0),n<=90&&s>=97?i===r.toUpperCase():s<=90&&n>=97?r===i.toUpperCase():!1)}function Cs(e,t){return!t||t===ys?se.createElement(e):se.createElementNS(t,e)}function Ts(e,t){for(var i=e.firstChild;i;){var r=i.nextSibling;t.appendChild(i),i=r}return t}function bi(e,t,i){e[i]!==t[i]&&(e[i]=t[i],e[i]?e.setAttribute(i,""):e.removeAttribute(i))}var Sr={OPTION:function(e,t){var i=e.parentNode;if(i){var r=i.nodeName.toUpperCase();r==="OPTGROUP"&&(i=i.parentNode,r=i&&i.nodeName.toUpperCase()),r==="SELECT"&&!i.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),i.selectedIndex=-1)}bi(e,t,"selected")},INPUT:function(e,t){bi(e,t,"checked"),bi(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var i=t.value;e.value!==i&&(e.value=i);var r=e.firstChild;if(r){var n=r.nodeValue;if(n==i||!i&&n==e.placeholder)return;r.nodeValue=i}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var i=-1,r=0,n=e.firstChild,s,o;n;)if(o=n.nodeName&&n.nodeName.toUpperCase(),o==="OPTGROUP")s=n,n=s.firstChild;else{if(o==="OPTION"){if(n.hasAttribute("selected")){i=r;break}r++}n=n.nextSibling,!n&&s&&(n=s.nextSibling,s=null)}e.selectedIndex=i}}},pt=1,kr=11,Cr=3,Tr=8;function _e(){}function Ps(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function _s(e){return function(i,r,n){if(n||(n={}),typeof r=="string")if(i.nodeName==="#document"||i.nodeName==="HTML"||i.nodeName==="BODY"){var s=r;r=se.createElement("html"),r.innerHTML=s}else r=ks(r);else r.nodeType===kr&&(r=r.firstElementChild);var o=n.getNodeKey||Ps,a=n.onBeforeNodeAdded||_e,l=n.onNodeAdded||_e,h=n.onBeforeElUpdated||_e,d=n.onElUpdated||_e,p=n.onBeforeNodeDiscarded||_e,v=n.onNodeDiscarded||_e,u=n.onBeforeElChildrenUpdated||_e,m=n.skipFromChildren||_e,g=n.addChild||function(b,x){return b.appendChild(x)},w=n.childrenOnly===!0,A=Object.create(null),E=[];function C(b){E.push(b)}function c(b,x){if(b.nodeType===pt)for(var R=b.firstChild;R;){var k=void 0;x&&(k=o(R))?C(k):(v(R),R.firstChild&&c(R,x)),R=R.nextSibling}}function y(b,x,R){p(b)!==!1&&(x&&x.removeChild(b),v(b),c(b,R))}function T(b){if(b.nodeType===pt||b.nodeType===kr)for(var x=b.firstChild;x;){var R=o(x);R&&(A[R]=x),T(x),x=x.nextSibling}}T(i);function P(b){l(b);for(var x=b.firstChild;x;){var R=x.nextSibling,k=o(x);if(k){var O=A[k];O&&$t(x,O)?(x.parentNode.replaceChild(O,x),L(O,x)):P(x)}else P(x);x=R}}function _(b,x,R){for(;x;){var k=x.nextSibling;(R=o(x))?C(R):y(x,b,!0),x=k}}function L(b,x,R){var k=o(x);k&&delete A[k],!(!R&&(h(b,x)===!1||(e(b,x),d(b),u(b,x)===!1)))&&(b.nodeName!=="TEXTAREA"?I(b,x):Sr.TEXTAREA(b,x))}function I(b,x){var R=m(b),k=x.firstChild,O=b.firstChild,Q,q,X,z,V;e:for(;k;){for(z=k.nextSibling,Q=o(k);!R&&O;){if(X=O.nextSibling,k.isSameNode&&k.isSameNode(O)){k=z,O=X;continue e}q=o(O);var re=O.nodeType,B=void 0;if(re===k.nodeType&&(re===pt?(Q?Q!==q&&((V=A[Q])?X===V?B=!1:(b.insertBefore(V,O),q?C(q):y(O,b,!0),O=V):B=!1):q&&(B=!1),B=B!==!1&&$t(O,k),B&&L(O,k)):(re===Cr||re==Tr)&&(B=!0,O.nodeValue!==k.nodeValue&&(O.nodeValue=k.nodeValue))),B){k=z,O=X;continue e}q?C(q):y(O,b,!0),O=X}if(Q&&(V=A[Q])&&$t(V,k))R||g(b,V),L(V,k);else{var Z=a(k);Z!==!1&&(Z&&(k=Z),k.actualize&&(k=k.actualize(b.ownerDocument||se)),g(b,k),P(k))}k=z,O=X}_(b,O,q);var ae=Sr[b.nodeName];ae&&ae(b,x)}var S=i,U=S.nodeType,D=r.nodeType;if(!w){if(U===pt)D===pt?$t(i,r)||(v(i),S=Ts(i,Cs(r.nodeName,r.namespaceURI))):S=r;else if(U===Cr||U===Tr){if(D===U)return S.nodeValue!==r.nodeValue&&(S.nodeValue=r.nodeValue),S;S=r}}if(S===r)v(i);else{if(r.isSameNode&&r.isSameNode(S))return;if(L(S,r,w),E)for(var N=0,oe=E.length;N<oe;N++){var H=A[E[N]];H&&y(H,H.parentNode,!1)}}return!w&&S!==i&&i.parentNode&&(S.actualize&&(S=S.actualize(i.ownerDocument||se)),i.parentNode.replaceChild(S,i)),S}}var Ls=_s(bs),Pr=Ls,jt=class{static patchEl(e,t,i){Pr(e,t,{childrenOnly:!1,onBeforeElUpdated:(r,n)=>{if(i&&i.isSameNode(r)&&f.isFormInput(r))return f.mergeFocusedInput(r,n),!1}})}constructor(e,t,i,r,n,s){this.view=e,this.liveSocket=e.liveSocket,this.container=t,this.id=i,this.rootID=e.root.id,this.html=r,this.streams=n,this.streamInserts={},this.targetCID=s,this.cidPatch=Le(this.targetCID),this.pendingRemoves=[],this.phxRemove=this.liveSocket.binding("remove"),this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[],aftertransitionsDiscarded:[]}}before(e,t){this.callbacks[`before${e}`].push(t)}after(e,t){this.callbacks[`after${e}`].push(t)}trackBefore(e,...t){this.callbacks[`before${e}`].forEach(i=>i(...t))}trackAfter(e,...t){this.callbacks[`after${e}`].forEach(i=>i(...t))}markPrunableContentForRemoval(){let e=this.liveSocket.binding(zt);f.all(this.container,`[${e}=${ui}]`,t=>t.innerHTML=""),f.all(this.container,`[${e}=append] > *, [${e}=prepend] > *`,t=>{t.setAttribute(lr,"")})}perform(){let{view:e,liveSocket:t,container:i,html:r}=this,n=this.isCIDPatch()?this.targetCIDContainer(r):i;if(this.isCIDPatch()&&!n)return;let s=t.getActiveElement(),{selectionStart:o,selectionEnd:a}=s&&f.hasSelectionRange(s)?s:{},l=t.binding(zt),h=t.binding(qt),d=t.binding(Ai),p=t.binding(Ir),v=t.binding(Dr),u=t.binding(Kn),m=[],g=[],w=[],A=[],E=null,C=t.time("premorph container prep",()=>this.buildDiffHTML(i,r,l,n));return this.trackBefore("added",i),this.trackBefore("updated",i,i),t.time("morphdom",()=>{this.streams.forEach(([c,y,T,P])=>{Object.entries(y).forEach(([_,[L,I]])=>{this.streamInserts[_]={ref:c,streamAt:L,limit:I}}),P!==void 0&&f.all(i,`[${ct}="${c}"]`,_=>{this.removeStreamChildElement(_)}),T.forEach(_=>{let L=i.querySelector(`[id="${_}"]`);L&&this.removeStreamChildElement(L)})}),Pr(n,C,{childrenOnly:n.getAttribute(de)===null,getNodeKey:c=>f.isPhxDestroyed(c)?null:c.id,skipFromChildren:c=>c.getAttribute(l)===ui,addChild:(c,y)=>{let{ref:T,streamAt:P,limit:_}=this.getStreamInsert(y);if(T===void 0)return c.appendChild(y);if(f.putSticky(y,ct,S=>S.setAttribute(ct,T)),P===0)c.insertAdjacentElement("afterbegin",y);else if(P===-1)c.appendChild(y);else if(P>0){let S=Array.from(c.children)[P];c.insertBefore(y,S)}let L=_!==null&&Array.from(c.children),I=[];_&&_<0&&L.length>_*-1?I=L.slice(0,L.length+_):_&&_>=0&&L.length>_&&(I=L.slice(_)),I.forEach(S=>{this.streamInserts[S.id]||this.removeStreamChildElement(S)})},onBeforeNodeAdded:c=>(f.maybeAddPrivateHooks(c,p,v),this.trackBefore("added",c),c),onNodeAdded:c=>{c.getAttribute&&this.maybeReOrderStream(c),c instanceof HTMLImageElement&&c.srcset?c.srcset=c.srcset:c instanceof HTMLVideoElement&&c.autoplay&&c.play(),f.isNowTriggerFormExternal(c,u)&&(E=c),c.getAttribute&&c.getAttribute("name")&&f.isFormInput(c)&&g.push(c),(f.isPhxChild(c)&&e.ownsElement(c)||f.isPhxSticky(c)&&e.ownsElement(c.parentNode))&&this.trackAfter("phxChildAdded",c),m.push(c)},onNodeDiscarded:c=>this.onNodeDiscarded(c),onBeforeNodeDiscarded:c=>c.getAttribute&&c.getAttribute(lr)!==null?!0:!(c.parentElement!==null&&c.id&&f.isPhxUpdate(c.parentElement,l,[ui,"append","prepend"])||this.maybePendingRemove(c)||this.skipCIDSibling(c)),onElUpdated:c=>{f.isNowTriggerFormExternal(c,u)&&(E=c),w.push(c),this.maybeReOrderStream(c)},onBeforeElUpdated:(c,y)=>{if(f.maybeAddPrivateHooks(y,p,v),f.cleanChildNodes(y,l),this.skipCIDSibling(y)||f.isPhxSticky(c))return!1;if(f.isIgnored(c,l)||c.form&&c.form.isSameNode(E))return this.trackBefore("updated",c,y),f.mergeAttrs(c,y,{isIgnored:!0}),w.push(c),f.applyStickyOperations(c),!1;if(c.type==="number"&&c.validity&&c.validity.badInput)return!1;if(!f.syncPendingRef(c,y,d))return f.isUploadInput(c)&&(this.trackBefore("updated",c,y),w.push(c)),f.applyStickyOperations(c),!1;if(f.isPhxChild(y)){let P=c.getAttribute(Oe);return f.mergeAttrs(c,y,{exclude:[gt]}),P!==""&&c.setAttribute(Oe,P),c.setAttribute(bt,this.rootID),f.applyStickyOperations(c),!1}return f.copyPrivates(y,c),s&&c.isSameNode(s)&&f.isFormInput(c)&&c.type!=="hidden"?(this.trackBefore("updated",c,y),f.mergeFocusedInput(c,y),f.syncAttrsToProps(c),w.push(c),f.applyStickyOperations(c),g.push(c),!1):(f.isPhxUpdate(y,l,["append","prepend"])&&A.push(new vs(c,y,y.getAttribute(l))),f.syncAttrsToProps(y),f.applyStickyOperations(y),y.getAttribute("name")&&f.isFormInput(y)&&g.push(y),this.trackBefore("updated",c,y),!0)}})}),t.isDebugEnabled()&&ls(),A.length>0&&t.time("post-morph append/prepend restoration",()=>{A.forEach(c=>c.perform())}),g.forEach(c=>{f.maybeHideFeedback(n,c,h)}),t.silenceEvents(()=>f.restoreFocus(s,o,a)),f.dispatchEvent(document,"phx:update"),m.forEach(c=>this.trackAfter("added",c)),w.forEach(c=>this.trackAfter("updated",c)),this.transitionPendingRemoves(),E&&(t.unload(),E.submit()),!0}onNodeDiscarded(e){(f.isPhxChild(e)||f.isPhxSticky(e))&&this.liveSocket.destroyViewByEl(e),this.trackAfter("discarded",e)}maybePendingRemove(e){return e.getAttribute&&e.getAttribute(this.phxRemove)!==null?(this.pendingRemoves.push(e),!0):!1}removeStreamChildElement(e){this.maybePendingRemove(e)||(e.remove(),this.onNodeDiscarded(e))}getStreamInsert(e){return(e.id?this.streamInserts[e.id]:{})||{}}maybeReOrderStream(e){let{ref:t,streamAt:i,limit:r}=this.getStreamInsert(e);if(i!==void 0){if(f.putSticky(e,ct,n=>n.setAttribute(ct,t)),i===0)e.parentElement.insertBefore(e,e.parentElement.firstElementChild);else if(i>0){let n=Array.from(e.parentElement.children),s=n.indexOf(e);if(i>=n.length-1)e.parentElement.appendChild(e);else{let o=n[i];s>i?e.parentElement.insertBefore(e,o):e.parentElement.insertBefore(e,o.nextElementSibling)}}}}transitionPendingRemoves(){let{pendingRemoves:e,liveSocket:t}=this;e.length>0&&(t.transitionRemoves(e),t.requestDOMUpdate(()=>{e.forEach(i=>{let r=f.firstPhxChild(i);r&&t.destroyViewByEl(r),i.remove()}),this.trackAfter("transitionsDiscarded",e)}))}isCIDPatch(){return this.cidPatch}skipCIDSibling(e){return e.nodeType===Node.ELEMENT_NODE&&e.getAttribute(wi)!==null}targetCIDContainer(e){if(!this.isCIDPatch())return;let[t,...i]=f.findComponentNodeList(this.container,this.targetCID);return i.length===0&&f.childNodeLength(e)===1?t:t&&t.parentNode}buildDiffHTML(e,t,i,r){let n=this.isCIDPatch(),s=n&&r.getAttribute(de)===this.targetCID.toString();if(!n||s)return t;{let o=null,a=document.createElement("template");o=f.cloneNode(r);let[l,...h]=f.findComponentNodeList(o,this.targetCID);return a.innerHTML=t,h.forEach(d=>d.remove()),Array.from(o.childNodes).forEach(d=>{d.id&&d.nodeType===Node.ELEMENT_NODE&&d.getAttribute(de)!==this.targetCID.toString()&&(d.setAttribute(wi,""),d.innerHTML="")}),Array.from(a.content.childNodes).forEach(d=>o.insertBefore(d,l)),l.remove(),o.outerHTML}}indexOf(e,t){return Array.from(e.children).indexOf(t)}},_r=class{static extract(e){let{[vr]:t,[gr]:i,[br]:r}=e;return delete e[vr],delete e[gr],delete e[br],{diff:e,title:r,reply:t||null,events:i||[]}}constructor(e,t){this.viewId=e,this.rendered={},this.mergeDiff(t)}parentViewId(){return this.viewId}toString(e){let[t,i]=this.recursiveToString(this.rendered,this.rendered[he],e);return[t,i]}recursiveToString(e,t=e[he],i){i=i?new Set(i):null;let r={buffer:"",components:t,onlyCids:i,streams:new Set};return this.toOutputBuffer(e,null,r),[r.buffer,r.streams]}componentCIDs(e){return Object.keys(e[he]||{}).map(t=>parseInt(t))}isComponentOnlyDiff(e){return e[he]?Object.keys(e).length===1:!1}getComponent(e,t){return e[he][t]}mergeDiff(e){let t=e[he],i={};if(delete e[he],this.rendered=this.mutableMerge(this.rendered,e),this.rendered[he]=this.rendered[he]||{},t){let r=this.rendered[he];for(let n in t)t[n]=this.cachedFindComponent(n,t[n],r,t,i);for(let n in t)r[n]=t[n];e[he]=t}}cachedFindComponent(e,t,i,r,n){if(n[e])return n[e];{let s,o,a=t[Ae];if(Le(a)){let l;a>0?l=this.cachedFindComponent(a,r[a],i,r,n):l=i[-a],o=l[Ae],s=this.cloneMerge(l,t),s[Ae]=o}else s=t[Ae]!==void 0?t:this.cloneMerge(i[e]||{},t);return n[e]=s,s}}mutableMerge(e,t){return t[Ae]!==void 0?t:(this.doMutableMerge(e,t),e)}doMutableMerge(e,t){for(let i in t){let r=t[i],n=e[i];ft(r)&&r[Ae]===void 0&&ft(n)?this.doMutableMerge(n,r):e[i]=r}}cloneMerge(e,t){let i=ne(ne({},e),t);for(let r in i){let n=t[r],s=e[r];ft(n)&&n[Ae]===void 0&&ft(s)&&(i[r]=this.cloneMerge(s,n))}return i}componentToString(e){let[t,i]=this.recursiveCIDToString(this.rendered[he],e);return[t,i]}pruneCIDs(e){e.forEach(t=>delete this.rendered[he][t])}get(){return this.rendered}isNewFingerprint(e={}){return!!e[Ae]}templateStatic(e,t){return typeof e=="number"?t[e]:e}toOutputBuffer(e,t,i){if(e[mi])return this.comprehensionToBuffer(e,t,i);let{[Ae]:r}=e;r=this.templateStatic(r,t),i.buffer+=r[0];for(let n=1;n<r.length;n++)this.dynamicToBuffer(e[n-1],t,i),i.buffer+=r[n]}comprehensionToBuffer(e,t,i){let{[mi]:r,[Ae]:n,[yr]:s}=e,[o,a,l,h]=s||[null,{},[],null];n=this.templateStatic(n,t);let d=t||e[os];for(let p=0;p<r.length;p++){let v=r[p];i.buffer+=n[0];for(let u=1;u<n.length;u++)this.dynamicToBuffer(v[u-1],d,i),i.buffer+=n[u]}s!==void 0&&(e[mi].length>0||l.length>0||h)&&(delete e[yr],i.streams.add(s))}dynamicToBuffer(e,t,i){if(typeof e=="number"){let[r,n]=this.recursiveCIDToString(i.components,e,i.onlyCids);i.buffer+=r,i.streams=new Set([...i.streams,...n])}else ft(e)?this.toOutputBuffer(e,t,i):i.buffer+=e}recursiveCIDToString(e,t,i){let r=e[t]||te(`no component for CID ${t}`,e),n=document.createElement("template"),[s,o]=this.recursiveToString(r,e,i);n.innerHTML=s;let a=n.content,l=i&&!i.has(t),[h,d]=Array.from(a.childNodes).reduce(([p,v],u,m)=>u.nodeType===Node.ELEMENT_NODE?u.getAttribute(de)?[p,!0]:(u.setAttribute(de,t),u.id||(u.id=`${this.parentViewId()}-${t}-${m}`),l&&(u.setAttribute(wi,""),u.innerHTML=""),[!0,v]):u.nodeValue.trim()!==""?(te(`only HTML element tags are allowed at the root of components.

got: "${u.nodeValue.trim()}"

within:
`,n.innerHTML.trim()),u.replaceWith(this.createSpan(u.nodeValue,t)),[!0,v]):(u.remove(),[p,v]),[!1,!1]);return!h&&!d?(te(`expected at least one HTML element tag inside a component, but the component is empty:
`,n.innerHTML.trim()),[this.createSpan("",t).outerHTML,o]):!h&&d?(te("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.",n.innerHTML.trim()),[n.innerHTML,o]):[n.innerHTML,o]}createSpan(e,t){let i=document.createElement("span");return i.innerText=e,i.setAttribute(de,t),i}},Rs=1,mt=class{static makeID(){return Rs++}static elementID(e){return e.phxHookId}constructor(e,t,i){this.__view=e,this.liveSocket=e.liveSocket,this.__callbacks=i,this.__listeners=new Set,this.__isDisconnected=!1,this.el=t,this.el.phxHookId=this.constructor.makeID();for(let r in this.__callbacks)this[r]=this.__callbacks[r]}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}__destroyed(){this.destroyed&&this.destroyed()}__reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}__disconnected(){this.__isDisconnected=!0,this.disconnected&&this.disconnected()}pushEvent(e,t={},i=function(){}){return this.__view.pushHookEvent(this.el,null,e,t,i)}pushEventTo(e,t,i={},r=function(){}){return this.__view.withinTargets(e,(n,s)=>n.pushHookEvent(this.el,s,t,i,r))}handleEvent(e,t){let i=(r,n)=>n?e:t(r.detail);return window.addEventListener(`phx:${e}`,i),this.__listeners.add(i),i}removeHandleEvent(e){let t=e(null,!0);window.removeEventListener(`phx:${t}`,e),this.__listeners.delete(e)}upload(e,t){return this.__view.dispatchUploads(e,t)}uploadTo(e,t,i){return this.__view.withinTargets(e,r=>r.dispatchUploads(t,i))}__cleanup__(){this.__listeners.forEach(e=>this.removeHandleEvent(e))}},Ut=null,Os={exec(e,t,i,r,n){let[s,o]=n||[null,{callback:n&&n.callback}];(t.charAt(0)==="["?JSON.parse(t):[[s,o]]).forEach(([l,h])=>{l===s&&o.data&&(h.data=Object.assign(h.data||{},o.data),h.callback=h.callback||o.callback),this.filterToEls(r,h).forEach(d=>{this[`exec_${l}`](e,t,i,r,d,h)})})},isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length>0)},exec_exec(e,t,i,r,n,[s,o]){(o?f.all(document,o):[r]).forEach(l=>{let h=l.getAttribute(s);if(!h)throw new Error(`expected ${s} to contain JS command on "${o}"`);i.liveSocket.execJS(l,h,e)})},exec_dispatch(e,t,i,r,n,{to:s,event:o,detail:a,bubbles:l}){a=a||{},a.dispatcher=r,f.dispatchEvent(n,o,{detail:a,bubbles:l})},exec_push(e,t,i,r,n,s){if(!i.isConnected())return;let{event:o,data:a,target:l,page_loading:h,loading:d,value:p,dispatcher:v,callback:u}=s,m={loading:d,value:p,target:l,page_loading:!!h},g=e==="change"&&v?v:r,w=l||g.getAttribute(i.binding("target"))||g;i.withinTargets(w,(A,E)=>{if(e==="change"){let{newCid:C,_target:c}=s;c=c||(f.isFormInput(r)?r.name:void 0),c&&(m._target=c),A.pushInput(r,E,C,o||t,m,u)}else if(e==="submit"){let{submitter:C}=s;A.submitForm(r,E,o||t,C,m,u)}else A.pushEvent(e,r,E,o||t,a,m,u)})},exec_navigate(e,t,i,r,n,{href:s,replace:o}){i.liveSocket.historyRedirect(s,o?"replace":"push")},exec_patch(e,t,i,r,n,{href:s,replace:o}){i.liveSocket.pushHistoryPatch(s,o?"replace":"push",r)},exec_focus(e,t,i,r,n){window.requestAnimationFrame(()=>Ge.attemptFocus(n))},exec_focus_first(e,t,i,r,n){window.requestAnimationFrame(()=>Ge.focusFirstInteractive(n)||Ge.focusFirst(n))},exec_push_focus(e,t,i,r,n){window.requestAnimationFrame(()=>Ut=n||r)},exec_pop_focus(e,t,i,r,n){window.requestAnimationFrame(()=>{Ut&&Ut.focus(),Ut=null})},exec_add_class(e,t,i,r,n,{names:s,transition:o,time:a}){this.addOrRemoveClasses(n,s,[],o,a,i)},exec_remove_class(e,t,i,r,n,{names:s,transition:o,time:a}){this.addOrRemoveClasses(n,[],s,o,a,i)},exec_transition(e,t,i,r,n,{time:s,transition:o}){this.addOrRemoveClasses(n,[],[],o,s,i)},exec_toggle(e,t,i,r,n,{display:s,ins:o,outs:a,time:l}){this.toggle(e,i,n,s,o,a,l)},exec_show(e,t,i,r,n,{display:s,transition:o,time:a}){this.show(e,i,n,s,o,a)},exec_hide(e,t,i,r,n,{display:s,transition:o,time:a}){this.hide(e,i,n,s,o,a)},exec_set_attr(e,t,i,r,n,{attr:[s,o]}){this.setOrRemoveAttrs(n,[[s,o]],[])},exec_remove_attr(e,t,i,r,n,{attr:s}){this.setOrRemoveAttrs(n,[],[s])},show(e,t,i,r,n,s){this.isVisible(i)||this.toggle(e,t,i,r,n,null,s)},hide(e,t,i,r,n,s){this.isVisible(i)&&this.toggle(e,t,i,r,null,n,s)},toggle(e,t,i,r,n,s,o){let[a,l,h]=n||[[],[],[]],[d,p,v]=s||[[],[],[]];if(a.length>0||d.length>0)if(this.isVisible(i)){let u=()=>{this.addOrRemoveClasses(i,p,a.concat(l).concat(h)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,d,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,v,p))})};i.dispatchEvent(new Event("phx:hide-start")),t.transition(o,u,()=>{this.addOrRemoveClasses(i,[],d.concat(v)),f.putSticky(i,"toggle",m=>m.style.display="none"),i.dispatchEvent(new Event("phx:hide-end"))})}else{if(e==="remove")return;let u=()=>{this.addOrRemoveClasses(i,l,d.concat(p).concat(v));let m=r||this.defaultDisplay(i);f.putSticky(i,"toggle",g=>g.style.display=m),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,a,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,h,l))})};i.dispatchEvent(new Event("phx:show-start")),t.transition(o,u,()=>{this.addOrRemoveClasses(i,[],a.concat(h)),i.dispatchEvent(new Event("phx:show-end"))})}else this.isVisible(i)?window.requestAnimationFrame(()=>{i.dispatchEvent(new Event("phx:hide-start")),f.putSticky(i,"toggle",u=>u.style.display="none"),i.dispatchEvent(new Event("phx:hide-end"))}):window.requestAnimationFrame(()=>{i.dispatchEvent(new Event("phx:show-start"));let u=r||this.defaultDisplay(i);f.putSticky(i,"toggle",m=>m.style.display=u),i.dispatchEvent(new Event("phx:show-end"))})},addOrRemoveClasses(e,t,i,r,n,s){let[o,a,l]=r||[[],[],[]];if(o.length>0){let h=()=>this.addOrRemoveClasses(e,a.concat(o),[]),d=()=>this.addOrRemoveClasses(e,t.concat(l),i.concat(o).concat(a));return s.transition(n,h,d)}window.requestAnimationFrame(()=>{let[h,d]=f.getSticky(e,"classes",[[],[]]),p=t.filter(g=>h.indexOf(g)<0&&!e.classList.contains(g)),v=i.filter(g=>d.indexOf(g)<0&&e.classList.contains(g)),u=h.filter(g=>i.indexOf(g)<0).concat(p),m=d.filter(g=>t.indexOf(g)<0).concat(v);f.putSticky(e,"classes",g=>(g.classList.remove(...m),g.classList.add(...u),[u,m]))})},setOrRemoveAttrs(e,t,i){let[r,n]=f.getSticky(e,"attrs",[[],[]]),s=t.map(([l,h])=>l).concat(i),o=r.filter(([l,h])=>!s.includes(l)).concat(t),a=n.filter(l=>!s.includes(l)).concat(i);f.putSticky(e,"attrs",l=>(a.forEach(h=>l.removeAttribute(h)),o.forEach(([h,d])=>l.setAttribute(h,d)),[o,a]))},hasAllClasses(e,t){return t.every(i=>e.classList.contains(i))},isToggledOut(e,t){return!this.isVisible(e)||this.hasAllClasses(e,t)},filterToEls(e,{to:t}){return t?f.all(document,t):[e]},defaultDisplay(e){return{tr:"table-row",td:"table-cell"}[e.tagName.toLowerCase()]||"block"}},ge=Os,Vt=(e,t,i=[])=>{let l=t,{submitter:r}=l,n=nr(l,["submitter"]),s=new FormData(e);r&&r.hasAttribute("name")&&r.form&&r.form===e&&s.append(r.name,r.value);let o=[];s.forEach((h,d,p)=>{h instanceof File&&o.push(d)}),o.forEach(h=>s.delete(h));let a=new URLSearchParams;for(let[h,d]of s.entries())(i.length===0||i.indexOf(h)>=0)&&a.append(h,d);for(let h in n)a.append(h,n[h]);return a.toString()},Fr=class{constructor(e,t,i,r,n){this.isDead=!1,this.liveSocket=t,this.flash=r,this.parent=i,this.root=i?i.root:this,this.el=e,this.id=this.el.id,this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.pruningCIDs=[],this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(s){s&&s()},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.uploaders={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>({redirect:this.redirect?this.href:void 0,url:this.redirect?void 0:this.href||void 0,params:this.connectParams(n),session:this.getSession(),static:this.getStatic(),flash:this.flash}))}setHref(e){this.href=e}setRedirect(e){this.redirect=!0,this.href=e}isMain(){return this.el.hasAttribute(Si)}connectParams(e){let t=this.liveSocket.params(this.el),i=f.all(document,`[${this.binding(qn)}]`).map(r=>r.src||r.href).filter(r=>typeof r=="string");return i.length>0&&(t._track_static=i),t._mounts=this.joinCount,t._live_referer=e,t}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(Oe)}getStatic(){let e=this.el.getAttribute(gt);return e===""?null:e}destroy(e=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let t=()=>{e();for(let i in this.viewHooks)this.destroyHook(this.viewHooks[i])};f.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",t).receive("error",t).receive("timeout",t)}setContainerClasses(...e){this.el.classList.remove(dr,ht,Dt,cr,di),this.el.classList.add(...e)}showLoader(e){if(clearTimeout(this.loaderTimer),e)this.loaderTimer=setTimeout(()=>this.showLoader(),e);else{for(let t in this.viewHooks)this.viewHooks[t].__disconnected();this.setContainerClasses(ht)}}execAll(e){f.all(this.el,`[${e}]`,t=>this.liveSocket.execJS(t,t.getAttribute(e)))}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(dr),this.execAll(this.binding("connected"))}triggerReconnected(){for(let e in this.viewHooks)this.viewHooks[e].__reconnected()}log(e,t){this.liveSocket.log(this,e,t)}transition(e,t,i=function(){}){this.liveSocket.transition(e,t,i)}withinTargets(e,t){if(e instanceof HTMLElement||e instanceof SVGElement)return this.liveSocket.owner(e,i=>t(i,e));if(Le(e))f.findComponentNodeList(this.el,e).length===0?te(`no component found matching phx-target of ${e}`):t(this,parseInt(e));else{let i=Array.from(document.querySelectorAll(e));i.length===0&&te(`nothing found matching the phx-target selector "${e}"`),i.forEach(r=>this.liveSocket.owner(r,n=>t(n,r)))}}applyDiff(e,t,i){this.log(e,()=>["",Jt(t)]);let{diff:r,reply:n,events:s,title:o}=_r.extract(t);i({diff:r,reply:n,events:s}),o&&window.requestAnimationFrame(()=>f.putTitle(o))}onJoin(e){let{rendered:t,container:i}=e;if(i){let[r,n]=i;this.el=f.replaceRootContainer(this.el,r,n)}this.childJoins=0,this.joinPending=!0,this.flash=null,Ee.dropLocal(this.liveSocket.localStorage,window.location.pathname,Lr),this.applyDiff("mount",t,({diff:r,events:n})=>{this.rendered=new _r(this.id,r);let[s,o]=this.renderContainer(null,"join");this.dropPendingRefs();let a=this.formsForRecovery(s);this.joinCount++,a.length>0?a.forEach(([l,h,d],p)=>{this.pushFormRecovery(l,d,v=>{p===a.length-1&&this.onJoinComplete(v,s,o,n)})}):this.onJoinComplete(e,s,o,n)})}dropPendingRefs(){f.all(document,`[${Me}="${this.id}"][${ue}]`,e=>{e.removeAttribute(ue),e.removeAttribute(Me)})}onJoinComplete({live_patch:e},t,i,r){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(e,t,i,r);f.findPhxChildrenInFragment(t,this.id).filter(s=>{let o=s.id&&this.el.querySelector(`[id="${s.id}"]`),a=o&&o.getAttribute(gt);return a&&s.setAttribute(gt,a),this.joinChild(s)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i,r)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(e,t,i,r)):this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i,r)])}attachTrueDocEl(){this.el=f.byId(this.id),this.el.setAttribute(bt,this.root.id)}execNewMounted(){let e=this.binding(Ir),t=this.binding(Dr);f.all(this.el,`[${e}], [${t}]`,i=>{f.maybeAddPrivateHooks(i,e,t),this.maybeAddNewHook(i)}),f.all(this.el,`[${this.binding(dt)}], [data-phx-${dt}]`,i=>{this.maybeAddNewHook(i)}),f.all(this.el,`[${this.binding(pr)}]`,i=>this.maybeMounted(i))}applyJoinPatch(e,t,i,r){this.attachTrueDocEl();let n=new jt(this,this.el,this.id,t,i,null);if(n.markPrunableContentForRemoval(),this.performPatch(n,!1),this.joinNewChildren(),this.execNewMounted(),this.joinPending=!1,this.liveSocket.dispatchEvents(r),this.applyPendingUpdates(),e){let{kind:s,to:o}=e;this.liveSocket.historyPatch(o,s)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(e,t){this.liveSocket.triggerDOM("onBeforeElUpdated",[e,t]);let i=this.getHook(e),r=i&&f.isIgnored(e,this.binding(zt));if(i&&!e.isEqualNode(t)&&!(r&&ds(e.dataset,t.dataset)))return i.__beforeUpdate(),i}maybeMounted(e){let t=e.getAttribute(this.binding(pr)),i=t&&f.private(e,"mounted");t&&!i&&(this.liveSocket.execJS(e,t),f.putPrivate(e,"mounted",!0))}maybeAddNewHook(e,t){let i=this.addHook(e);i&&i.__mounted()}performPatch(e,t){let i=[],r=!1,n=new Set;return e.after("added",s=>{this.liveSocket.triggerDOM("onNodeAdded",[s]),this.maybeAddNewHook(s),s.getAttribute&&this.maybeMounted(s)}),e.after("phxChildAdded",s=>{f.isPhxSticky(s)?this.liveSocket.joinRootViews():r=!0}),e.before("updated",(s,o)=>{this.triggerBeforeUpdateHook(s,o)&&n.add(s.id)}),e.after("updated",s=>{n.has(s.id)&&this.getHook(s).__updated()}),e.after("discarded",s=>{s.nodeType===Node.ELEMENT_NODE&&i.push(s)}),e.after("transitionsDiscarded",s=>this.afterElementsRemoved(s,t)),e.perform(),this.afterElementsRemoved(i,t),r}afterElementsRemoved(e,t){let i=[];e.forEach(r=>{let n=f.all(r,`[${de}]`),s=f.all(r,`[${this.binding(dt)}]`);n.concat(r).forEach(o=>{let a=this.componentID(o);Le(a)&&i.indexOf(a)===-1&&i.push(a)}),s.concat(r).forEach(o=>{let a=this.getHook(o);a&&this.destroyHook(a)})}),t&&this.maybePushComponentsDestroyed(i)}joinNewChildren(){f.findPhxChildren(this.el,this.id).forEach(e=>this.joinChild(e))}getChildById(e){return this.root.children[this.id][e]}getDescendentByEl(e){return e.id===this.id?this:this.children[e.getAttribute(Ke)][e.id]}destroyDescendent(e){for(let t in this.root.children)for(let i in this.root.children[t])if(i===e)return this.root.children[t][i].destroy()}joinChild(e){if(!this.getChildById(e.id)){let i=new Fr(e,this.liveSocket,this);return this.root.children[this.id][i.id]=i,i.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(e){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.joinCallback(()=>{this.pendingJoinOps.forEach(([e,t])=>{e.isDestroyed()||t()}),this.pendingJoinOps=[]})}update(e,t){if(this.isJoinPending()||this.liveSocket.hasPendingLink()&&this.root.isMain())return this.pendingDiffs.push({diff:e,events:t});this.rendered.mergeDiff(e);let i=!1;this.rendered.isComponentOnlyDiff(e)?this.liveSocket.time("component patch complete",()=>{f.findParentCIDs(this.el,this.rendered.componentCIDs(e)).forEach(n=>{this.componentPatch(this.rendered.getComponent(e,n),n)&&(i=!0)})}):wr(e)||this.liveSocket.time("full patch complete",()=>{let[r,n]=this.renderContainer(e,"update"),s=new jt(this,this.el,this.id,r,n,null);i=this.performPatch(s,!0)}),this.liveSocket.dispatchEvents(t),i&&this.joinNewChildren()}renderContainer(e,t){return this.liveSocket.time(`toString diff (${t})`,()=>{let i=this.el.tagName,r=e?this.rendered.componentCIDs(e).concat(this.pruningCIDs):null,[n,s]=this.rendered.toString(r);return[`<${i}>${n}</${i}>`,s]})}componentPatch(e,t){if(wr(e))return!1;let[i,r]=this.rendered.componentToString(t),n=new jt(this,this.el,this.id,i,r,t);return this.performPatch(n,!0)}getHook(e){return this.viewHooks[mt.elementID(e)]}addHook(e){if(mt.elementID(e)||!e.getAttribute)return;let t=e.getAttribute(`data-phx-${dt}`)||e.getAttribute(this.binding(dt));if(t&&!this.ownsElement(e))return;let i=this.liveSocket.getHookCallbacks(t);if(i){e.id||te(`no DOM ID for hook "${t}". Hooks require a unique ID on each element.`,e);let r=new mt(this,e,i);return this.viewHooks[mt.elementID(r.el)]=r,r}else t!==null&&te(`unknown hook found for "${t}"`,e)}destroyHook(e){e.__destroyed(),e.__cleanup__(),delete this.viewHooks[mt.elementID(e.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(({diff:e,events:t})=>this.update(e,t)),this.pendingDiffs=[],this.eachChild(e=>e.applyPendingUpdates())}eachChild(e){let t=this.root.children[this.id]||{};for(let i in t)e(this.getChildById(i))}onChannel(e,t){this.liveSocket.onChannel(this.channel,e,i=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>t(i)]):this.liveSocket.requestDOMUpdate(()=>t(i))})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",e=>{this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",e,({diff:t,events:i})=>this.update(t,i))})}),this.onChannel("redirect",({to:e,flash:t})=>this.onRedirect({to:e,flash:t})),this.onChannel("live_patch",e=>this.onLivePatch(e)),this.onChannel("live_redirect",e=>this.onLiveRedirect(e)),this.channel.onError(e=>this.onError(e)),this.channel.onClose(e=>this.onClose(e))}destroyAllChildren(){this.eachChild(e=>e.destroy())}onLiveRedirect(e){let{to:t,kind:i,flash:r}=e,n=this.expandURL(t);this.liveSocket.historyRedirect(n,i,r)}onLivePatch(e){let{to:t,kind:i}=e;this.href=this.expandURL(t),this.liveSocket.historyPatch(t,i)}expandURL(e){return e.startsWith("/")?`${window.location.protocol}//${window.location.host}${e}`:e}onRedirect({to:e,flash:t}){this.liveSocket.redirect(e,t)}isDestroyed(){return this.destroyed}joinDead(){this.isDead=!0}join(e){this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel(),this.isMain()&&(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=t=>{t=t||function(){},e?e(this.joinCount,t):t()},this.liveSocket.wrapPush(this,{timeout:!1},()=>this.channel.join().receive("ok",t=>{this.isDestroyed()||this.liveSocket.requestDOMUpdate(()=>this.onJoin(t))}).receive("error",t=>!this.isDestroyed()&&this.onJoinError(t)).receive("timeout",()=>!this.isDestroyed()&&this.onJoinError({reason:"timeout"})))}onJoinError(e){if(e.reason==="reload")return this.log("error",()=>[`failed mount with ${e.status}. Falling back to page request`,e]),this.onRedirect({to:this.href});if(e.reason==="unauthorized"||e.reason==="stale")return this.log("error",()=>["unauthorized live_redirect. Falling back to page request",e]),this.onRedirect({to:this.href});if((e.redirect||e.live_redirect)&&(this.joinPending=!1,this.channel.leave()),e.redirect)return this.onRedirect(e.redirect);if(e.live_redirect)return this.onLiveRedirect(e.live_redirect);this.displayError([ht,Dt,di]),this.log("error",()=>["unable to join",e]),this.liveSocket.isConnected()&&this.liveSocket.reloadWithJitter(this)}onClose(e){if(!this.isDestroyed()){if(this.liveSocket.hasPendingLink()&&e!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(is)}}onError(e){this.onClose(e),this.liveSocket.isConnected()&&this.log("error",()=>["view crashed",e]),this.liveSocket.isUnloaded()||(this.liveSocket.isConnected()?this.displayError([ht,Dt,di]):this.displayError([ht,Dt,cr]))}displayError(e){this.isMain()&&f.dispatchEvent(window,"phx:page-loading-start",{detail:{to:this.href,kind:"error"}}),this.showLoader(),this.setContainerClasses(...e),this.execAll(this.binding("disconnected"))}pushWithReply(e,t,i,r=function(){}){if(!this.isConnected())return;let[n,[s],o]=e?e():[null,[],{}],a=function(){};return(o.page_loading||s&&s.getAttribute(this.binding(hr))!==null)&&(a=this.liveSocket.withPageLoading({kind:"element",target:s})),typeof i.cid!="number"&&delete i.cid,this.liveSocket.wrapPush(this,{timeout:!0},()=>this.channel.push(t,i,ns).receive("ok",l=>{let h=d=>{l.redirect&&this.onRedirect(l.redirect),l.live_patch&&this.onLivePatch(l.live_patch),l.live_redirect&&this.onLiveRedirect(l.live_redirect),a(),r(l,d)};l.diff?this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",l.diff,({diff:d,reply:p,events:v})=>{n!==null&&this.undoRefs(n),this.update(d,v),h(p)})}):(n!==null&&this.undoRefs(n),h(null))}))}undoRefs(e){!this.isConnected()||f.all(document,`[${Me}="${this.id}"][${ue}="${e}"]`,t=>{let i=t.getAttribute(Ht);t.removeAttribute(ue),t.removeAttribute(Me),t.getAttribute(ci)!==null&&(t.readOnly=!1,t.removeAttribute(ci)),i!==null&&(t.disabled=i==="true",t.removeAttribute(Ht)),Rr.forEach(s=>f.removeClass(t,s));let r=t.getAttribute(Mt);r!==null&&(t.innerText=r,t.removeAttribute(Mt));let n=f.private(t,ue);if(n){let s=this.triggerBeforeUpdateHook(t,n);jt.patchEl(t,n,this.liveSocket.getActiveElement()),s&&s.__updated(),f.deletePrivate(t,ue)}})}putRef(e,t,i={}){let r=this.ref++,n=this.binding(Ai);return i.loading&&(e=e.concat(f.all(document,i.loading))),e.forEach(s=>{s.classList.add(`phx-${t}-loading`),s.setAttribute(ue,r),s.setAttribute(Me,this.el.id);let o=s.getAttribute(n);o!==null&&(s.getAttribute(Mt)||s.setAttribute(Mt,s.innerText),o!==""&&(s.innerText=o),s.setAttribute("disabled",""))}),[r,e,i]}componentID(e){let t=e.getAttribute&&e.getAttribute(de);return t?parseInt(t):null}targetComponentID(e,t,i={}){if(Le(t))return t;let r=e.getAttribute(this.binding("target"));return Le(r)?parseInt(r):t&&(r!==null||i.target)?this.closestComponentID(t):null}closestComponentID(e){return Le(e)?e:e?Re(e.closest(`[${de}]`),t=>this.ownsElement(t)&&this.componentID(t)):null}pushHookEvent(e,t,i,r,n){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",i,r]),!1;let[s,o,a]=this.putRef([e],"hook");return this.pushWithReply(()=>[s,o,a],"event",{type:"hook",event:i,value:r,cid:this.closestComponentID(t)},(l,h)=>n(h,s)),s}extractMeta(e,t,i){let r=this.binding("value-");for(let n=0;n<e.attributes.length;n++){t||(t={});let s=e.attributes[n].name;s.startsWith(r)&&(t[s.replace(r,"")]=e.getAttribute(s))}if(e.value!==void 0&&!(e instanceof HTMLFormElement)&&(t||(t={}),t.value=e.value,e.tagName==="INPUT"&&Hr.indexOf(e.type)>=0&&!e.checked&&delete t.value),i){t||(t={});for(let n in i)t[n]=i[n]}return t}pushEvent(e,t,i,r,n,s={},o){this.pushWithReply(()=>this.putRef([t],e,s),"event",{type:e,event:r,value:this.extractMeta(t,n,s.value),cid:this.targetComponentID(t,i,s)},(a,l)=>o&&o(l))}pushFileProgress(e,t,i,r=function(){}){this.liveSocket.withinOwners(e.form,(n,s)=>{n.pushWithReply(null,"progress",{event:e.getAttribute(n.binding(es)),ref:e.getAttribute(Ne),entry_ref:t,progress:i,cid:n.targetComponentID(e.form,s)},r)})}pushInput(e,t,i,r,n,s){let o,a=Le(i)?i:this.targetComponentID(e.form,t),l=()=>this.putRef([e,e.form],"change",n),h,d=this.extractMeta(e.form);e.getAttribute(this.binding("change"))?h=Vt(e.form,ne({_target:n._target},d),[e.name]):h=Vt(e.form,ne({_target:n._target},d)),f.isUploadInput(e)&&e.files&&e.files.length>0&&ee.trackFiles(e,Array.from(e.files)),o=ee.serializeUploads(e);let p={type:"form",event:r,value:h,uploads:o,cid:a};this.pushWithReply(l,"event",p,v=>{if(f.showError(e,this.liveSocket.binding(qt)),f.isUploadInput(e)&&e.getAttribute("data-phx-auto-upload")!==null){if(ee.filesAwaitingPreflight(e).length>0){let[u,m]=l();this.uploadFiles(e.form,t,u,a,g=>{s&&s(v),this.triggerAwaitingSubmit(e.form)})}}else s&&s(v)})}triggerAwaitingSubmit(e){let t=this.getScheduledSubmit(e);if(t){let[i,r,n,s]=t;this.cancelSubmit(e),s()}}getScheduledSubmit(e){return this.formSubmits.find(([t,i,r,n])=>t.isSameNode(e))}scheduleSubmit(e,t,i,r){if(this.getScheduledSubmit(e))return!0;this.formSubmits.push([e,t,i,r])}cancelSubmit(e){this.formSubmits=this.formSubmits.filter(([t,i,r])=>t.isSameNode(e)?(this.undoRefs(i),!1):!0)}disableForm(e,t={}){let i=d=>!(vt(d,`${this.binding(zt)}=ignore`,d.form)||vt(d,"data-phx-update=ignore",d.form)),r=d=>d.hasAttribute(this.binding(Ai)),n=d=>d.tagName=="BUTTON",s=d=>["INPUT","TEXTAREA","SELECT"].includes(d.tagName),o=Array.from(e.elements),a=o.filter(r),l=o.filter(n).filter(i),h=o.filter(s).filter(i);return l.forEach(d=>{d.setAttribute(Ht,d.disabled),d.disabled=!0}),h.forEach(d=>{d.setAttribute(ci,d.readOnly),d.readOnly=!0,d.files&&(d.setAttribute(Ht,d.disabled),d.disabled=!0)}),e.setAttribute(this.binding(hr),""),this.putRef([e].concat(a).concat(l).concat(h),"submit",t)}pushFormSubmit(e,t,i,r,n,s){let o=()=>this.disableForm(e,n),a=this.targetComponentID(e,t);if(ee.hasUploadsInProgress(e)){let[l,h]=o(),d=()=>this.pushFormSubmit(e,r,t,i,n,s);return this.scheduleSubmit(e,l,n,d)}else if(ee.inputsAwaitingPreflight(e).length>0){let[l,h]=o(),d=()=>[l,h,n];this.uploadFiles(e,t,l,a,p=>{let v=this.extractMeta(e),u=Vt(e,ne({submitter:r},v));this.pushWithReply(d,"event",{type:"form",event:i,value:u,cid:a},s)})}else if(!(e.hasAttribute(ue)&&e.classList.contains("phx-submit-loading"))){let l=this.extractMeta(e),h=Vt(e,ne({submitter:r},l));this.pushWithReply(o,"event",{type:"form",event:i,value:h,cid:a},s)}}uploadFiles(e,t,i,r,n){let s=this.joinCount,o=ee.activeFileInputs(e),a=o.length;o.forEach(l=>{let h=new ee(l,this,()=>{a--,a===0&&n()});this.uploaders[l]=h;let d=h.entries().map(v=>v.toPreflightPayload()),p={ref:l.getAttribute(Ne),entries:d,cid:this.targetComponentID(l.form,t)};this.log("upload",()=>["sending preflight request",p]),this.pushWithReply(null,"allow_upload",p,v=>{if(this.log("upload",()=>["got preflight response",v]),v.error){this.undoRefs(i);let[u,m]=v.error;this.log("upload",()=>[`error for entry ${u}`,m])}else{let u=m=>{this.channel.onError(()=>{this.joinCount===s&&m()})};h.initAdapterUpload(v,u,this.liveSocket)}})})}dispatchUploads(e,t){let i=f.findUploadInputs(this.el).filter(r=>r.name===e);i.length===0?te(`no live file inputs found matching the name "${e}"`):i.length>1?te(`duplicate live file inputs found matching the name "${e}"`):f.dispatchEvent(i[0],Or,{detail:{files:t}})}pushFormRecovery(e,t,i){this.liveSocket.withinOwners(e,(r,n)=>{let s=this.binding("change"),o=Array.from(e.elements).filter(h=>f.isFormInput(h)&&h.name&&!h.hasAttribute(s));if(o.length===0)return;let a=o.find(h=>h.type!=="hidden")||a[0],l=e.getAttribute(this.binding(fr))||e.getAttribute(this.binding("change"));ge.exec("change",l,r,a,["push",{_target:a.name,newCid:t,callback:i}])})}pushLinkPatch(e,t,i){let r=this.liveSocket.setPendingLink(e),n=t?()=>this.putRef([t],"click"):null,s=()=>this.liveSocket.redirect(window.location.href),o=e.startsWith("/")?`${location.protocol}//${location.host}${e}`:e,a=this.pushWithReply(n,"live_patch",{url:o},l=>{this.liveSocket.requestDOMUpdate(()=>{l.link_redirect?this.liveSocket.replaceMain(e,null,i,r):(this.liveSocket.commitPendingLink(r)&&(this.href=e),this.applyPendingUpdates(),i&&i(r))})});a?a.receive("timeout",s):s()}formsForRecovery(e){if(this.joinCount===0)return[];let t=this.binding("change"),i=document.createElement("template");return i.innerHTML=e,f.all(this.el,`form[${t}]`).filter(r=>r.id&&this.ownsElement(r)).filter(r=>r.elements.length>0).filter(r=>r.getAttribute(this.binding(fr))!=="ignore").map(r=>{let n=i.content.querySelector(`form[id="${r.id}"][${t}="${r.getAttribute(t)}"]`);return n?[r,n,this.targetComponentID(n)]:[r,r,this.targetComponentID(r)]}).filter(([r,n,s])=>n)}maybePushComponentsDestroyed(e){let t=e.filter(i=>f.findComponentNodeList(this.el,i).length===0);t.length>0&&(this.pruningCIDs.push(...t),this.pushWithReply(null,"cids_will_destroy",{cids:t},()=>{this.pruningCIDs=this.pruningCIDs.filter(r=>t.indexOf(r)!==-1);let i=t.filter(r=>f.findComponentNodeList(this.el,r).length===0);i.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:i},r=>{this.rendered.pruneCIDs(r.cids)})}))}ownsElement(e){let t=e.closest(Ye);return e.getAttribute(Ke)===this.id||t&&t.id===this.id||!t&&this.isDead}submitForm(e,t,i,r,n={}){f.putPrivate(e,Xt,!0);let s=this.liveSocket.binding(qt),o=Array.from(e.elements);o.forEach(a=>f.putPrivate(a,Xt,!0)),this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,t,i,r,n,()=>{o.forEach(a=>f.showError(a,s)),this.liveSocket.restorePreviouslyActiveFocus()})}binding(e){return this.liveSocket.binding(e)}},Br=class{constructor(e,t,i={}){if(this.unloaded=!1,!t||t.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new t(e,i),this.bindingPrefix=i.bindingPrefix||rs,this.opts=i,this.params=gi(i.params||{}),this.viewLogger=i.viewLogger,this.metadataCallbacks=i.metadata||{},this.defaults=Object.assign(Jt(ss),i.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.outgoingMainEl=null,this.clickStartedAtTarget=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=Jt(window.location),this.hooks=i.hooks||{},this.uploaders=i.uploaders||{},this.loaderTimeout=i.loaderTimeout||ts,this.reloadWithJitterTimer=null,this.maxReloads=i.maxReloads||Un,this.reloadJitterMin=i.reloadJitterMin||Vn,this.reloadJitterMax=i.reloadJitterMax||Wn,this.failsafeJitter=i.failsafeJitter||Jn,this.localStorage=i.localStorage||window.localStorage,this.sessionStorage=i.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.domCallbacks=Object.assign({onNodeAdded:gi(),onBeforeElUpdated:gi()},i.dom||{}),this.transitions=new Is,window.addEventListener("pagehide",r=>{this.unloaded=!0}),this.socket.onOpen(()=>{this.isUnloaded()&&window.location.reload()})}isProfileEnabled(){return this.sessionStorage.getItem(fi)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(Nt)==="true"}isDebugDisabled(){return this.sessionStorage.getItem(Nt)==="false"}enableDebug(){this.sessionStorage.setItem(Nt,"true")}enableProfiling(){this.sessionStorage.setItem(fi,"true")}disableDebug(){this.sessionStorage.setItem(Nt,"false")}disableProfiling(){this.sessionStorage.removeItem(fi)}enableLatencySim(e){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(pi,e)}disableLatencySim(){this.sessionStorage.removeItem(pi)}getLatencySim(){let e=this.sessionStorage.getItem(pi);return e?parseInt(e):null}getSocket(){return this.socket}connect(){window.location.hostname==="localhost"&&!this.isDebugDisabled()&&this.enableDebug();let e=()=>{this.joinRootViews()?(this.bindTopLevelEvents(),this.socket.connect()):this.main?this.socket.connect():this.bindTopLevelEvents({dead:!0}),this.joinDeadView()};["complete","loaded","interactive"].indexOf(document.readyState)>=0?e():document.addEventListener("DOMContentLoaded",()=>e())}disconnect(e){clearTimeout(this.reloadWithJitterTimer),this.socket.disconnect(e)}replaceTransport(e){clearTimeout(this.reloadWithJitterTimer),this.socket.replaceTransport(e),this.connect()}execJS(e,t,i=null){this.owner(e,r=>ge.exec(i,t,r,e))}execJSHookPush(e,t,i,r){this.withinOwners(e,n=>{ge.exec("hook",t,n,e,["push",{data:i,callback:r}])})}unload(){this.unloaded||(this.main&&this.isConnected()&&this.log(this.main,"socket",()=>["disconnect for page nav"]),this.unloaded=!0,this.destroyAllViews(),this.disconnect())}triggerDOM(e,t){this.domCallbacks[e](...t)}time(e,t){if(!this.isProfileEnabled()||!console.time)return t();console.time(e);let i=t();return console.timeEnd(e),i}log(e,t,i){if(this.viewLogger){let[r,n]=i();this.viewLogger(e,t,r,n)}else if(this.isDebugEnabled()){let[r,n]=i();hs(e,t,r,n)}}requestDOMUpdate(e){this.transitions.after(e)}transition(e,t,i=function(){}){this.transitions.addTransition(e,t,i)}onChannel(e,t,i){e.on(t,r=>{let n=this.getLatencySim();n?setTimeout(()=>i(r),n):i(r)})}wrapPush(e,t,i){let r=this.getLatencySim(),n=e.joinCount;if(!r)return this.isConnected()&&t.timeout?i().receive("timeout",()=>{e.joinCount===n&&!e.isDestroyed()&&this.reloadWithJitter(e,()=>{this.log(e,"timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}):i();let s={receives:[],receive(o,a){this.receives.push([o,a])}};return setTimeout(()=>{e.isDestroyed()||s.receives.reduce((o,[a,l])=>o.receive(a,l),i())},r),s}reloadWithJitter(e,t){clearTimeout(this.reloadWithJitterTimer),this.disconnect();let i=this.reloadJitterMin,r=this.reloadJitterMax,n=Math.floor(Math.random()*(r-i+1))+i,s=Ee.updateLocal(this.localStorage,window.location.pathname,Lr,0,o=>o+1);s>this.maxReloads&&(n=this.failsafeJitter),this.reloadWithJitterTimer=setTimeout(()=>{e.isDestroyed()||e.isConnected()||(e.destroy(),t?t():this.log(e,"join",()=>[`encountered ${s} consecutive reloads`]),s>this.maxReloads&&this.log(e,"join",()=>[`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]),this.hasPendingLink()?window.location=this.pendingLink:window.location.reload())},n)}getHookCallbacks(e){return e&&e.startsWith("Phoenix.")?gs[e.split(".")[1]]:this.hooks[e]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(e){return`${this.getBindingPrefix()}${e}`}channel(e,t){return this.socket.channel(e,t)}joinDeadView(){let e=document.body;if(e&&!this.isPhxView(e)&&!this.isPhxView(document.firstElementChild)){let t=this.newRootView(e);t.setHref(this.getHref()),t.joinDead(),this.main||(this.main=t),window.requestAnimationFrame(()=>t.execNewMounted())}}joinRootViews(){let e=!1;return f.all(document,`${Ye}:not([${Ke}])`,t=>{if(!this.getRootById(t.id)){let i=this.newRootView(t);i.setHref(this.getHref()),i.join(),t.hasAttribute(Si)&&(this.main=i)}e=!0}),e}redirect(e,t){this.unload(),Ee.redirect(e,t)}replaceMain(e,t,i=null,r=this.setPendingLink(e)){let n=this.currentLocation.href;this.outgoingMainEl=this.outgoingMainEl||this.main.el;let s=f.cloneNode(this.outgoingMainEl,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(s,t,n),this.main.setRedirect(e),this.transitionRemoves(),this.main.join((o,a)=>{o===1&&this.commitPendingLink(r)&&this.requestDOMUpdate(()=>{f.findPhxSticky(document).forEach(l=>s.appendChild(l)),this.outgoingMainEl.replaceWith(s),this.outgoingMainEl=null,i&&requestAnimationFrame(()=>i(r)),a()})})}transitionRemoves(e){let t=this.binding("remove");e=e||f.all(document,`[${t}]`),e.forEach(i=>{this.execJS(i,i.getAttribute(t),"remove")})}isPhxView(e){return e.getAttribute&&e.getAttribute(Oe)!==null}newRootView(e,t,i){let r=new Fr(e,this,null,t,i);return this.roots[r.id]=r,r}owner(e,t){let i=Re(e.closest(Ye),r=>this.getViewByEl(r))||this.main;i&&t(i)}withinOwners(e,t){this.owner(e,i=>t(i,e))}getViewByEl(e){let t=e.getAttribute(bt);return Re(this.getRootById(t),i=>i.getDescendentByEl(e))}getRootById(e){return this.roots[e]}destroyAllViews(){for(let e in this.roots)this.roots[e].destroy(),delete this.roots[e];this.main=null}destroyViewByEl(e){let t=this.getRootById(e.getAttribute(bt));t&&t.id===e.id?(t.destroy(),delete this.roots[t.id]):t&&t.destroyDescendent(e.id)}setActiveElement(e){if(this.activeElement===e)return;this.activeElement=e;let t=()=>{e===this.activeElement&&(this.activeElement=null),e.removeEventListener("mouseup",this),e.removeEventListener("touchend",this)};e.addEventListener("mouseup",t),e.addEventListener("touchend",t)}getActiveElement(){return document.activeElement===document.body?this.activeElement||document.activeElement:document.activeElement||document.body}dropActiveElement(e){this.prevActive&&e.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents({dead:e}={}){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,this.socket.onClose(t=>{if(t&&t.code===1e3&&this.main)return this.reloadWithJitter(this.main)}),document.body.addEventListener("click",function(){}),window.addEventListener("pageshow",t=>{t.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),e||this.bindNav(),this.bindClicks(),e||this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(t,i,r,n,s,o)=>{let a=n.getAttribute(this.binding(Zn)),l=t.key&&t.key.toLowerCase();if(a&&a.toLowerCase()!==l)return;let h=ne({key:t.key},this.eventMeta(i,t,n));ge.exec(i,s,r,n,["push",{data:h}])}),this.bind({blur:"focusout",focus:"focusin"},(t,i,r,n,s,o)=>{if(!o){let a=ne({key:t.key},this.eventMeta(i,t,n));ge.exec(i,s,r,n,["push",{data:a}])}}),this.bind({blur:"blur",focus:"focus"},(t,i,r,n,s,o,a)=>{if(a==="window"){let l=this.eventMeta(i,t,n);ge.exec(i,o,r,n,["push",{data:l}])}}),window.addEventListener("dragover",t=>t.preventDefault()),window.addEventListener("drop",t=>{t.preventDefault();let i=Re(vt(t.target,this.binding(ar)),s=>s.getAttribute(this.binding(ar))),r=i&&document.getElementById(i),n=Array.from(t.dataTransfer.files||[]);!r||r.disabled||n.length===0||!(r.files instanceof FileList)||(ee.trackFiles(r,n,t.dataTransfer),r.dispatchEvent(new Event("input",{bubbles:!0})))}),this.on(Or,t=>{let i=t.target;if(!f.isUploadInput(i))return;let r=Array.from(t.detail.files||[]).filter(n=>n instanceof File||n instanceof Blob);ee.trackFiles(i,r),i.dispatchEvent(new Event("input",{bubbles:!0}))}))}eventMeta(e,t,i){let r=this.metadataCallbacks[e];return r?r(t,i):{}}setPendingLink(e){return this.linkRef++,this.pendingLink=e,this.linkRef}commitPendingLink(e){return this.linkRef!==e?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(e,t){for(let i in e){let r=e[i];this.on(r,n=>{let s=this.binding(i),o=this.binding(`window-${i}`),a=n.target.getAttribute&&n.target.getAttribute(s);a?this.debounce(n.target,n,r,()=>{this.withinOwners(n.target,l=>{t(n,i,l,n.target,a,null)})}):f.all(document,`[${o}]`,l=>{let h=l.getAttribute(o);this.debounce(l,n,r,()=>{this.withinOwners(l,d=>{t(n,i,d,l,h,"window")})})})})}}bindClicks(){window.addEventListener("click",e=>this.clickStartedAtTarget=e.target),this.bindClick("click","click",!1),this.bindClick("mousedown","capture-click",!0)}bindClick(e,t,i){let r=this.binding(t);window.addEventListener(e,n=>{let s=null;if(i)s=n.target.matches(`[${r}]`)?n.target:n.target.querySelector(`[${r}]`);else{let a=this.clickStartedAtTarget||n.target;s=vt(a,r),this.dispatchClickAway(n,a),this.clickStartedAtTarget=null}let o=s&&s.getAttribute(r);if(!o){!i&&f.isNewPageClick(n,window.location)&&this.unload();return}s.getAttribute("href")==="#"&&n.preventDefault(),!s.hasAttribute(ue)&&this.debounce(s,n,"click",()=>{this.withinOwners(s,a=>{ge.exec("click",o,a,s,["push",{data:this.eventMeta("click",n,s)}])})})},i)}dispatchClickAway(e,t){let i=this.binding("click-away");f.all(document,`[${i}]`,r=>{r.isSameNode(t)||r.contains(t)||this.withinOwners(e.target,n=>{let s=r.getAttribute(i);ge.isVisible(r)&&ge.exec("click",s,n,r,["push",{data:this.eventMeta("click",e,e.target)}])})})}bindNav(){if(!Ee.canPushState())return;history.scrollRestoration&&(history.scrollRestoration="manual");let e=null;window.addEventListener("scroll",t=>{clearTimeout(e),e=setTimeout(()=>{Ee.updateCurrentState(i=>Object.assign(i,{scroll:window.scrollY}))},100)}),window.addEventListener("popstate",t=>{if(!this.registerNewLocation(window.location))return;let{type:i,id:r,root:n,scroll:s}=t.state||{},o=window.location.href;f.dispatchEvent(window,"phx:navigate",{detail:{href:o,patch:i==="patch",pop:!0}}),this.requestDOMUpdate(()=>{this.main.isConnected()&&i==="patch"&&r===this.main.id?this.main.pushLinkPatch(o,null,()=>{this.maybeScroll(s)}):this.replaceMain(o,null,()=>{n&&this.replaceRootHistory(),this.maybeScroll(s)})})},!1),window.addEventListener("click",t=>{let i=vt(t.target,li),r=i&&i.getAttribute(li);if(!r||!this.isConnected()||!this.main||f.wantsNewTab(t))return;let n=i.href,s=i.getAttribute(Xn);t.preventDefault(),t.stopImmediatePropagation(),this.pendingLink!==n&&this.requestDOMUpdate(()=>{if(r==="patch")this.pushHistoryPatch(n,s,i);else if(r==="redirect")this.historyRedirect(n,s);else throw new Error(`expected ${li} to be "patch" or "redirect", got: ${r}`);let o=i.getAttribute(this.binding("click"));o&&this.requestDOMUpdate(()=>this.execJS(i,o,"click"))})},!1)}maybeScroll(e){typeof e=="number"&&requestAnimationFrame(()=>{window.scrollTo(0,e)})}dispatchEvent(e,t={}){f.dispatchEvent(window,`phx:${e}`,{detail:t})}dispatchEvents(e){e.forEach(([t,i])=>this.dispatchEvent(t,i))}withPageLoading(e,t){f.dispatchEvent(window,"phx:page-loading-start",{detail:e});let i=()=>f.dispatchEvent(window,"phx:page-loading-stop",{detail:e});return t?t(i):i}pushHistoryPatch(e,t,i){if(!this.isConnected())return Ee.redirect(e);this.withPageLoading({to:e,kind:"patch"},r=>{this.main.pushLinkPatch(e,i,n=>{this.historyPatch(e,t,n),r()})})}historyPatch(e,t,i=this.setPendingLink(e)){!this.commitPendingLink(i)||(Ee.pushState(t,{type:"patch",id:this.main.id},e),f.dispatchEvent(window,"phx:navigate",{detail:{patch:!0,href:e,pop:!1}}),this.registerNewLocation(window.location))}historyRedirect(e,t,i){if(!this.isConnected())return Ee.redirect(e,i);if(/^\/$|^\/[^\/]+.*$/.test(e)){let{protocol:n,host:s}=window.location;e=`${n}//${s}${e}`}let r=window.scrollY;this.withPageLoading({to:e,kind:"redirect"},n=>{this.replaceMain(e,i,s=>{s===this.linkRef&&(Ee.pushState(t,{type:"redirect",id:this.main.id,scroll:r},e),f.dispatchEvent(window,"phx:navigate",{detail:{href:e,patch:!1,pop:!1}}),this.registerNewLocation(window.location)),n()})})}replaceRootHistory(){Ee.pushState("replace",{root:!0,type:"patch",id:this.main.id})}registerNewLocation(e){let{pathname:t,search:i}=this.currentLocation;return t+i===e.pathname+e.search?!1:(this.currentLocation=Jt(e),!0)}bindForms(){let e=0,t=!1;this.on("submit",i=>{let r=i.target.getAttribute(this.binding("submit")),n=i.target.getAttribute(this.binding("change"));!t&&n&&!r&&(t=!0,i.preventDefault(),this.withinOwners(i.target,s=>{s.disableForm(i.target),window.requestAnimationFrame(()=>{f.isUnloadableFormSubmit(i)&&this.unload(),i.target.submit()})}))},!0),this.on("submit",i=>{let r=i.target.getAttribute(this.binding("submit"));if(!r){f.isUnloadableFormSubmit(i)&&this.unload();return}i.preventDefault(),i.target.disabled=!0,this.withinOwners(i.target,n=>{ge.exec("submit",r,n,i.target,["push",{submitter:i.submitter}])})},!1);for(let i of["change","input"])this.on(i,r=>{let n=this.binding("change"),s=r.target,o=s.getAttribute(n),a=s.form&&s.form.getAttribute(n),l=o||a;if(!l||s.type==="number"&&s.validity&&s.validity.badInput)return;let h=o?s:s.form,d=e;e++;let{at:p,type:v}=f.private(s,"prev-iteration")||{};p===d-1&&i!==v||(f.putPrivate(s,"prev-iteration",{at:d,type:i}),this.debounce(s,r,i,()=>{this.withinOwners(h,u=>{f.putPrivate(s,xi,!0),f.isTextualInput(s)||this.setActiveElement(s),ge.exec("change",l,u,s,["push",{_target:r.target.name,dispatcher:h}])})}))},!1);this.on("reset",i=>{let r=i.target;f.resetForm(r,this.binding(qt));let n=Array.from(r.elements).find(s=>s.type==="reset");window.requestAnimationFrame(()=>{n.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!1}))})})}debounce(e,t,i,r){if(i==="blur"||i==="focusout")return r();let n=this.binding(Yn),s=this.binding(Qn),o=this.defaults.debounce.toString(),a=this.defaults.throttle.toString();this.withinOwners(e,l=>{let h=()=>!l.isDestroyed()&&document.body.contains(e);f.debounce(e,t,n,o,s,a,h,()=>{r()})})}silenceEvents(e){this.silenced=!0,e(),this.silenced=!1}on(e,t){window.addEventListener(e,i=>{this.silenced||t(i)})}},Is=class{constructor(){this.transitions=new Set,this.pendingOps=[]}reset(){this.transitions.forEach(e=>{clearTimeout(e),this.transitions.delete(e)}),this.flushPendingOps()}after(e){this.size()===0?e():this.pushPendingOp(e)}addTransition(e,t,i){t();let r=setTimeout(()=>{this.transitions.delete(r),i(),this.flushPendingOps()},e);this.transitions.add(r)}pushPendingOp(e){this.pendingOps.push(e)}size(){return this.transitions.size}flushPendingOps(){if(this.size()>0)return;let e=this.pendingOps.shift();e&&(e(),this.flushPendingOps())}};var ri=Dn(jr());var $i={};oi($i,{default:()=>po});var F="top",W="bottom",j="right",$="left",Gt="auto",Ie=[F,W,j,$],ke="start",Fe="end",Ur="clippingParents",Yt="viewport",Qe="popper",Vr="reference",Ci=Ie.reduce(function(e,t){return e.concat([t+"-"+ke,t+"-"+Fe])},[]),Qt=[].concat(Ie,[Gt]).reduce(function(e,t){return e.concat([t,t+"-"+ke,t+"-"+Fe])},[]),Ds="beforeRead",Hs="read",Ms="afterRead",Ns="beforeMain",Fs="main",Bs="afterMain",$s="beforeWrite",js="write",Us="afterWrite",Wr=[Ds,Hs,Ms,Ns,Fs,Bs,$s,js,Us];function K(e){return e?(e.nodeName||"").toLowerCase():null}function M(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function fe(e){var t=M(e).Element;return e instanceof t||e instanceof Element}function J(e){var t=M(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ze(e){if(typeof ShadowRoot=="undefined")return!1;var t=M(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Vs(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},n=t.attributes[i]||{},s=t.elements[i];!J(s)||!K(s)||(Object.assign(s.style,r),Object.keys(n).forEach(function(o){var a=n[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Ws(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var n=t.elements[r],s=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),a=o.reduce(function(l,h){return l[h]="",l},{});!J(n)||!K(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}var Jr={name:"applyStyles",enabled:!0,phase:"write",fn:Vs,effect:Ws,requires:["computeStyles"]};function G(e){return e.split("-")[0]}var ve=Math.max,Be=Math.min,Ce=Math.round;function et(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function yt(){return!/^((?!chrome|android).)*safari/i.test(et())}function pe(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r=e.getBoundingClientRect(),n=1,s=1;t&&J(e)&&(n=e.offsetWidth>0&&Ce(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Ce(r.height)/e.offsetHeight||1);var o=fe(e)?M(e):window,a=o.visualViewport,l=!yt()&&i,h=(r.left+(l&&a?a.offsetLeft:0))/n,d=(r.top+(l&&a?a.offsetTop:0))/s,p=r.width/n,v=r.height/s;return{width:p,height:v,top:d,right:h+p,bottom:d+v,left:h,x:h,y:d}}function $e(e){var t=pe(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function wt(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&Ze(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ie(e){return M(e).getComputedStyle(e)}function Ti(e){return["table","td","th"].indexOf(K(e))>=0}function Y(e){return((fe(e)?e.ownerDocument:e.document)||window.document).documentElement}function Te(e){return K(e)==="html"?e:e.assignedSlot||e.parentNode||(Ze(e)?e.host:null)||Y(e)}function qr(e){return!J(e)||ie(e).position==="fixed"?null:e.offsetParent}function Js(e){var t=/firefox/i.test(et()),i=/Trident/i.test(et());if(i&&J(e)){var r=ie(e);if(r.position==="fixed")return null}var n=Te(e);for(Ze(n)&&(n=n.host);J(n)&&["html","body"].indexOf(K(n))<0;){var s=ie(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function be(e){for(var t=M(e),i=qr(e);i&&Ti(i)&&ie(i).position==="static";)i=qr(i);return i&&(K(i)==="html"||K(i)==="body"&&ie(i).position==="static")?t:i||Js(e)||t}function je(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ue(e,t,i){return ve(e,Be(t,i))}function Xr(e,t,i){var r=Ue(e,t,i);return r>i?i:r}function xt(){return{top:0,right:0,bottom:0,left:0}}function At(e){return Object.assign({},xt(),e)}function Et(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}var qs=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,At(typeof t!="number"?t:Et(t,Ie))};function Xs(e){var t,i=e.state,r=e.name,n=e.options,s=i.elements.arrow,o=i.modifiersData.popperOffsets,a=G(i.placement),l=je(a),h=[$,j].indexOf(a)>=0,d=h?"height":"width";if(!(!s||!o)){var p=qs(n.padding,i),v=$e(s),u=l==="y"?F:$,m=l==="y"?W:j,g=i.rects.reference[d]+i.rects.reference[l]-o[l]-i.rects.popper[d],w=o[l]-i.rects.reference[l],A=be(s),E=A?l==="y"?A.clientHeight||0:A.clientWidth||0:0,C=g/2-w/2,c=p[u],y=E-v[d]-p[m],T=E/2-v[d]/2+C,P=Ue(c,T,y),_=l;i.modifiersData[r]=(t={},t[_]=P,t.centerOffset=P-T,t)}}function zs(e){var t=e.state,i=e.options,r=i.element,n=r===void 0?"[data-popper-arrow]":r;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||!wt(t.elements.popper,n)||(t.elements.arrow=n))}var zr={name:"arrow",enabled:!0,phase:"main",fn:Xs,effect:zs,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function me(e){return e.split("-")[1]}var Ks={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Gs(e,t){var i=e.x,r=e.y,n=t.devicePixelRatio||1;return{x:Ce(i*n)/n||0,y:Ce(r*n)/n||0}}function Kr(e){var t,i=e.popper,r=e.popperRect,n=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,h=e.adaptive,d=e.roundOffsets,p=e.isFixed,v=o.x,u=v===void 0?0:v,m=o.y,g=m===void 0?0:m,w=typeof d=="function"?d({x:u,y:g}):{x:u,y:g};u=w.x,g=w.y;var A=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),C=$,c=F,y=window;if(h){var T=be(i),P="clientHeight",_="clientWidth";if(T===M(i)&&(T=Y(i),ie(T).position!=="static"&&a==="absolute"&&(P="scrollHeight",_="scrollWidth")),T=T,n===F||(n===$||n===j)&&s===Fe){c=W;var L=p&&T===y&&y.visualViewport?y.visualViewport.height:T[P];g-=L-r.height,g*=l?1:-1}if(n===$||(n===F||n===W)&&s===Fe){C=j;var I=p&&T===y&&y.visualViewport?y.visualViewport.width:T[_];u-=I-r.width,u*=l?1:-1}}var S=Object.assign({position:a},h&&Ks),U=d===!0?Gs({x:u,y:g},M(i)):{x:u,y:g};if(u=U.x,g=U.y,l){var D;return Object.assign({},S,(D={},D[c]=E?"0":"",D[C]=A?"0":"",D.transform=(y.devicePixelRatio||1)<=1?"translate("+u+"px, "+g+"px)":"translate3d("+u+"px, "+g+"px, 0)",D))}return Object.assign({},S,(t={},t[c]=E?g+"px":"",t[C]=A?u+"px":"",t.transform="",t))}function Ys(e){var t=e.state,i=e.options,r=i.gpuAcceleration,n=r===void 0?!0:r,s=i.adaptive,o=s===void 0?!0:s,a=i.roundOffsets,l=a===void 0?!0:a,h={placement:G(t.placement),variation:me(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Kr(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Kr(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Gr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ys,data:{}};var Zt={passive:!0};function Qs(e){var t=e.state,i=e.instance,r=e.options,n=r.scroll,s=n===void 0?!0:n,o=r.resize,a=o===void 0?!0:o,l=M(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&h.forEach(function(d){d.addEventListener("scroll",i.update,Zt)}),a&&l.addEventListener("resize",i.update,Zt),function(){s&&h.forEach(function(d){d.removeEventListener("scroll",i.update,Zt)}),a&&l.removeEventListener("resize",i.update,Zt)}}var Yr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Qs,data:{}};var Zs={left:"right",right:"left",bottom:"top",top:"bottom"};function tt(e){return e.replace(/left|right|bottom|top/g,function(t){return Zs[t]})}var eo={start:"end",end:"start"};function ei(e){return e.replace(/start|end/g,function(t){return eo[t]})}function Ve(e){var t=M(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function We(e){return pe(Y(e)).left+Ve(e).scrollLeft}function Pi(e,t){var i=M(e),r=Y(e),n=i.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(n){s=n.width,o=n.height;var h=yt();(h||!h&&t==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:s,height:o,x:a+We(e),y:l}}function _i(e){var t,i=Y(e),r=Ve(e),n=(t=e.ownerDocument)==null?void 0:t.body,s=ve(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=ve(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-r.scrollLeft+We(e),l=-r.scrollTop;return ie(n||i).direction==="rtl"&&(a+=ve(i.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Je(e){var t=ie(e),i=t.overflow,r=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+r)}function ti(e){return["html","body","#document"].indexOf(K(e))>=0?e.ownerDocument.body:J(e)&&Je(e)?e:ti(Te(e))}function De(e,t){var i;t===void 0&&(t=[]);var r=ti(e),n=r===((i=e.ownerDocument)==null?void 0:i.body),s=M(r),o=n?[s].concat(s.visualViewport||[],Je(r)?r:[]):r,a=t.concat(o);return n?a:a.concat(De(Te(o)))}function it(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function to(e,t){var i=pe(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function Qr(e,t,i){return t===Yt?it(Pi(e,i)):fe(t)?to(t,i):it(_i(Y(e)))}function io(e){var t=De(Te(e)),i=["absolute","fixed"].indexOf(ie(e).position)>=0,r=i&&J(e)?be(e):e;return fe(r)?t.filter(function(n){return fe(n)&&wt(n,r)&&K(n)!=="body"}):[]}function Li(e,t,i,r){var n=t==="clippingParents"?io(e):[].concat(t),s=[].concat(n,[i]),o=s[0],a=s.reduce(function(l,h){var d=Qr(e,h,r);return l.top=ve(d.top,l.top),l.right=Be(d.right,l.right),l.bottom=Be(d.bottom,l.bottom),l.left=ve(d.left,l.left),l},Qr(e,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function St(e){var t=e.reference,i=e.element,r=e.placement,n=r?G(r):null,s=r?me(r):null,o=t.x+t.width/2-i.width/2,a=t.y+t.height/2-i.height/2,l;switch(n){case F:l={x:o,y:t.y-i.height};break;case W:l={x:o,y:t.y+t.height};break;case j:l={x:t.x+t.width,y:a};break;case $:l={x:t.x-i.width,y:a};break;default:l={x:t.x,y:t.y}}var h=n?je(n):null;if(h!=null){var d=h==="y"?"height":"width";switch(s){case ke:l[h]=l[h]-(t[d]/2-i[d]/2);break;case Fe:l[h]=l[h]+(t[d]/2-i[d]/2);break;default:}}return l}function ye(e,t){t===void 0&&(t={});var i=t,r=i.placement,n=r===void 0?e.placement:r,s=i.strategy,o=s===void 0?e.strategy:s,a=i.boundary,l=a===void 0?Ur:a,h=i.rootBoundary,d=h===void 0?Yt:h,p=i.elementContext,v=p===void 0?Qe:p,u=i.altBoundary,m=u===void 0?!1:u,g=i.padding,w=g===void 0?0:g,A=At(typeof w!="number"?w:Et(w,Ie)),E=v===Qe?Vr:Qe,C=e.rects.popper,c=e.elements[m?E:v],y=Li(fe(c)?c:c.contextElement||Y(e.elements.popper),l,d,o),T=pe(e.elements.reference),P=St({reference:T,element:C,strategy:"absolute",placement:n}),_=it(Object.assign({},C,P)),L=v===Qe?_:T,I={top:y.top-L.top+A.top,bottom:L.bottom-y.bottom+A.bottom,left:y.left-L.left+A.left,right:L.right-y.right+A.right},S=e.modifiersData.offset;if(v===Qe&&S){var U=S[n];Object.keys(I).forEach(function(D){var N=[j,W].indexOf(D)>=0?1:-1,oe=[F,W].indexOf(D)>=0?"y":"x";I[D]+=U[oe]*N})}return I}function Ri(e,t){t===void 0&&(t={});var i=t,r=i.placement,n=i.boundary,s=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,h=l===void 0?Qt:l,d=me(r),p=d?a?Ci:Ci.filter(function(m){return me(m)===d}):Ie,v=p.filter(function(m){return h.indexOf(m)>=0});v.length===0&&(v=p);var u=v.reduce(function(m,g){return m[g]=ye(e,{placement:g,boundary:n,rootBoundary:s,padding:o})[G(g)],m},{});return Object.keys(u).sort(function(m,g){return u[m]-u[g]})}function ro(e){if(G(e)===Gt)return[];var t=tt(e);return[ei(e),t,ei(t)]}function no(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var n=i.mainAxis,s=n===void 0?!0:n,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,h=i.padding,d=i.boundary,p=i.rootBoundary,v=i.altBoundary,u=i.flipVariations,m=u===void 0?!0:u,g=i.allowedAutoPlacements,w=t.options.placement,A=G(w),E=A===w,C=l||(E||!m?[tt(w)]:ro(w)),c=[w].concat(C).reduce(function(X,z){return X.concat(G(z)===Gt?Ri(t,{placement:z,boundary:d,rootBoundary:p,padding:h,flipVariations:m,allowedAutoPlacements:g}):z)},[]),y=t.rects.reference,T=t.rects.popper,P=new Map,_=!0,L=c[0],I=0;I<c.length;I++){var S=c[I],U=G(S),D=me(S)===ke,N=[F,W].indexOf(U)>=0,oe=N?"width":"height",H=ye(t,{placement:S,boundary:d,rootBoundary:p,altBoundary:v,padding:h}),b=N?D?j:$:D?W:F;y[oe]>T[oe]&&(b=tt(b));var x=tt(b),R=[];if(s&&R.push(H[U]<=0),a&&R.push(H[b]<=0,H[x]<=0),R.every(function(X){return X})){L=S,_=!1;break}P.set(S,R)}if(_)for(var k=m?3:1,O=function(z){var V=c.find(function(re){var B=P.get(re);if(B)return B.slice(0,z).every(function(Z){return Z})});if(V)return L=V,"break"},Q=k;Q>0;Q--){var q=O(Q);if(q==="break")break}t.placement!==L&&(t.modifiersData[r]._skip=!0,t.placement=L,t.reset=!0)}}var Zr={name:"flip",enabled:!0,phase:"main",fn:no,requiresIfExists:["offset"],data:{_skip:!1}};function en(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function tn(e){return[F,j,W,$].some(function(t){return e[t]>=0})}function so(e){var t=e.state,i=e.name,r=t.rects.reference,n=t.rects.popper,s=t.modifiersData.preventOverflow,o=ye(t,{elementContext:"reference"}),a=ye(t,{altBoundary:!0}),l=en(o,r),h=en(a,n,s),d=tn(l),p=tn(h);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:d,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":p})}var rn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:so};function oo(e,t,i){var r=G(e),n=[$,F].indexOf(r)>=0?-1:1,s=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,o=s[0],a=s[1];return o=o||0,a=(a||0)*n,[$,j].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function ao(e){var t=e.state,i=e.options,r=e.name,n=i.offset,s=n===void 0?[0,0]:n,o=Qt.reduce(function(d,p){return d[p]=oo(p,t.rects,s),d},{}),a=o[t.placement],l=a.x,h=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=h),t.modifiersData[r]=o}var nn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ao};function lo(e){var t=e.state,i=e.name;t.modifiersData[i]=St({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var sn={name:"popperOffsets",enabled:!0,phase:"read",fn:lo,data:{}};function Oi(e){return e==="x"?"y":"x"}function ho(e){var t=e.state,i=e.options,r=e.name,n=i.mainAxis,s=n===void 0?!0:n,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,h=i.rootBoundary,d=i.altBoundary,p=i.padding,v=i.tether,u=v===void 0?!0:v,m=i.tetherOffset,g=m===void 0?0:m,w=ye(t,{boundary:l,rootBoundary:h,padding:p,altBoundary:d}),A=G(t.placement),E=me(t.placement),C=!E,c=je(A),y=Oi(c),T=t.modifiersData.popperOffsets,P=t.rects.reference,_=t.rects.popper,L=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,I=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,U={x:0,y:0};if(!!T){if(s){var D,N=c==="y"?F:$,oe=c==="y"?W:j,H=c==="y"?"height":"width",b=T[c],x=b+w[N],R=b-w[oe],k=u?-_[H]/2:0,O=E===ke?P[H]:_[H],Q=E===ke?-_[H]:-P[H],q=t.elements.arrow,X=u&&q?$e(q):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:xt(),V=z[N],re=z[oe],B=Ue(0,P[H],X[H]),Z=C?P[H]/2-k-B-V-I.mainAxis:O-B-V-I.mainAxis,ae=C?-P[H]/2+k+B+re+I.mainAxis:Q+B+re+I.mainAxis,Pe=t.elements.arrow&&be(t.elements.arrow),qe=Pe?c==="y"?Pe.clientTop||0:Pe.clientLeft||0:0,Xe=(D=S==null?void 0:S[c])!=null?D:0,nt=b+Z-Xe-qe,Tt=b+ae-Xe,st=Ue(u?Be(x,nt):x,b,u?ve(R,Tt):R);T[c]=st,U[c]=st-b}if(a){var zi,Sn=c==="x"?F:$,kn=c==="x"?W:j,He=T[y],Pt=y==="y"?"height":"width",Ki=He+w[Sn],Gi=He-w[kn],ni=[F,$].indexOf(A)!==-1,Yi=(zi=S==null?void 0:S[y])!=null?zi:0,Qi=ni?Ki:He-P[Pt]-_[Pt]-Yi+I.altAxis,Zi=ni?He+P[Pt]+_[Pt]-Yi-I.altAxis:Gi,er=u&&ni?Xr(Qi,He,Zi):Ue(u?Qi:Ki,He,u?Zi:Gi);T[y]=er,U[y]=er-He}t.modifiersData[r]=U}}var on={name:"preventOverflow",enabled:!0,phase:"main",fn:ho,requiresIfExists:["offset"]};function Ii(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Di(e){return e===M(e)||!J(e)?Ve(e):Ii(e)}function co(e){var t=e.getBoundingClientRect(),i=Ce(t.width)/e.offsetWidth||1,r=Ce(t.height)/e.offsetHeight||1;return i!==1||r!==1}function Hi(e,t,i){i===void 0&&(i=!1);var r=J(t),n=J(t)&&co(t),s=Y(t),o=pe(e,n,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((K(t)!=="body"||Je(s))&&(a=Di(t)),J(t)?(l=pe(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=We(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function uo(e){var t=new Map,i=new Set,r=[];e.forEach(function(s){t.set(s.name,s)});function n(s){i.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=t.get(a);l&&n(l)}}),r.push(s)}return e.forEach(function(s){i.has(s.name)||n(s)}),r}function Mi(e){var t=uo(e);return Wr.reduce(function(i,r){return i.concat(t.filter(function(n){return n.phase===r}))},[])}function Ni(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function Fi(e){var t=e.reduce(function(i,r){var n=i[r.name];return i[r.name]=n?Object.assign({},n,r,{options:Object.assign({},n.options,r.options),data:Object.assign({},n.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}var an={placement:"bottom",modifiers:[],strategy:"absolute"};function ln(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function hn(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,n=t.defaultOptions,s=n===void 0?an:n;return function(a,l,h){h===void 0&&(h=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},an,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],v=!1,u={state:d,setOptions:function(A){var E=typeof A=="function"?A(d.options):A;g(),d.options=Object.assign({},s,d.options,E),d.scrollParents={reference:fe(a)?De(a):a.contextElement?De(a.contextElement):[],popper:De(l)};var C=Mi(Fi([].concat(r,d.options.modifiers)));return d.orderedModifiers=C.filter(function(c){return c.enabled}),m(),u.update()},forceUpdate:function(){if(!v){var A=d.elements,E=A.reference,C=A.popper;if(!!ln(E,C)){d.rects={reference:Hi(E,be(C),d.options.strategy==="fixed"),popper:$e(C)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(I){return d.modifiersData[I.name]=Object.assign({},I.data)});for(var c=0;c<d.orderedModifiers.length;c++){if(d.reset===!0){d.reset=!1,c=-1;continue}var y=d.orderedModifiers[c],T=y.fn,P=y.options,_=P===void 0?{}:P,L=y.name;typeof T=="function"&&(d=T({state:d,options:_,name:L,instance:u})||d)}}}},update:Ni(function(){return new Promise(function(w){u.forceUpdate(),w(d)})}),destroy:function(){g(),v=!0}};if(!ln(a,l))return u;u.setOptions(h).then(function(w){!v&&h.onFirstUpdate&&h.onFirstUpdate(w)});function m(){d.orderedModifiers.forEach(function(w){var A=w.name,E=w.options,C=E===void 0?{}:E,c=w.effect;if(typeof c=="function"){var y=c({state:d,name:A,instance:u,options:C}),T=function(){};p.push(y||T)}})}function g(){p.forEach(function(w){return w()}),p=[]}return u}}var fo=[Yr,sn,Gr,Jr,nn,Zr,on,zr,rn],Bi=hn({defaultModifiers:fo});var po={updated(){let e=this.el.children[0],t=this.el.children[1];t&&Bi(e,t,{placement:this.el.dataset.placement||"bottom-start",strategy:"fixed",modifiers:[{name:"offset",options:{offset:[0,8]}}]})}};var Ji={};oi(Ji,{THRESHOLD:()=>Wi,default:()=>yo});var dn=e=>typeof e=="object"&&e!=null&&e.nodeType===1,cn=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",ji=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let i=getComputedStyle(e,null);return cn(i.overflowY,t)||cn(i.overflowX,t)||(r=>{let n=(s=>{if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch(o){return null}})(r);return!!n&&(n.clientHeight<r.scrollHeight||n.clientWidth<r.scrollWidth)})(e)}return!1},ii=(e,t,i,r,n,s,o,a)=>s<e&&o>t||s>e&&o<t?0:s<=e&&a<=i||o>=t&&a>=i?s-e-r:o>t&&a<i||s<e&&a>i?o-t+n:0,mo=e=>{let t=e.parentElement;return t==null?e.getRootNode().host||null:t},Ui=(e,t)=>{var i,r,n,s;if(typeof document=="undefined")return[];let{scrollMode:o,block:a,inline:l,boundary:h,skipOverflowHiddenElements:d}=t,p=typeof h=="function"?h:H=>H!==h;if(!dn(e))throw new TypeError("Invalid target");let v=document.scrollingElement||document.documentElement,u=[],m=e;for(;dn(m)&&p(m);){if(m=mo(m),m===v){u.push(m);break}m!=null&&m===document.body&&ji(m)&&!ji(document.documentElement)||m!=null&&ji(m,d)&&u.push(m)}let g=(r=(i=window.visualViewport)==null?void 0:i.width)!=null?r:innerWidth,w=(s=(n=window.visualViewport)==null?void 0:n.height)!=null?s:innerHeight,{scrollX:A,scrollY:E}=window,{height:C,width:c,top:y,right:T,bottom:P,left:_}=e.getBoundingClientRect(),{top:L,right:I,bottom:S,left:U}=(H=>{let b=window.getComputedStyle(H);return{top:parseFloat(b.scrollMarginTop)||0,right:parseFloat(b.scrollMarginRight)||0,bottom:parseFloat(b.scrollMarginBottom)||0,left:parseFloat(b.scrollMarginLeft)||0}})(e),D=a==="start"||a==="nearest"?y-L:a==="end"?P+S:y+C/2-L+S,N=l==="center"?_+c/2-U+I:l==="end"?T+I:_-U,oe=[];for(let H=0;H<u.length;H++){let b=u[H],{height:x,width:R,top:k,right:O,bottom:Q,left:q}=b.getBoundingClientRect();if(o==="if-needed"&&y>=0&&_>=0&&P<=w&&T<=g&&y>=k&&P<=Q&&_>=q&&T<=O)return oe;let X=getComputedStyle(b),z=parseInt(X.borderLeftWidth,10),V=parseInt(X.borderTopWidth,10),re=parseInt(X.borderRightWidth,10),B=parseInt(X.borderBottomWidth,10),Z=0,ae=0,Pe="offsetWidth"in b?b.offsetWidth-b.clientWidth-z-re:0,qe="offsetHeight"in b?b.offsetHeight-b.clientHeight-V-B:0,Xe="offsetWidth"in b?b.offsetWidth===0?0:R/b.offsetWidth:0,nt="offsetHeight"in b?b.offsetHeight===0?0:x/b.offsetHeight:0;if(v===b)Z=a==="start"?D:a==="end"?D-w:a==="nearest"?ii(E,E+w,w,V,B,E+D,E+D+C,C):D-w/2,ae=l==="start"?N:l==="center"?N-g/2:l==="end"?N-g:ii(A,A+g,g,z,re,A+N,A+N+c,c),Z=Math.max(0,Z+E),ae=Math.max(0,ae+A);else{Z=a==="start"?D-k-V:a==="end"?D-Q+B+qe:a==="nearest"?ii(k,Q,x,V,B+qe,D,D+C,C):D-(k+x/2)+qe/2,ae=l==="start"?N-q-z:l==="center"?N-(q+R/2)+Pe/2:l==="end"?N-O+re+Pe:ii(q,O,R,z,re+Pe,N,N+c,c);let{scrollLeft:Tt,scrollTop:st}=b;Z=nt===0?0:Math.max(0,Math.min(st+Z/nt,b.scrollHeight-x/nt+qe)),ae=Xe===0?0:Math.max(0,Math.min(Tt+ae/Xe,b.scrollWidth-R/Xe+Pe)),D+=st-Z,N+=Tt-ae}oe.push({el:b,top:Z,left:ae})}return oe};var go=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function kt(e,t){if(!e.isConnected||!(n=>{let s=n;for(;s&&s.parentNode;){if(s.parentNode===document)return!0;s=s.parentNode instanceof ShadowRoot?s.parentNode.host:s.parentNode}return!1})(e))return;let i=(n=>{let s=window.getComputedStyle(n);return{top:parseFloat(s.scrollMarginTop)||0,right:parseFloat(s.scrollMarginRight)||0,bottom:parseFloat(s.scrollMarginBottom)||0,left:parseFloat(s.scrollMarginLeft)||0}})(e);if((n=>typeof n=="object"&&typeof n.behavior=="function")(t))return t.behavior(Ui(e,t));let r=typeof t=="boolean"||t==null?void 0:t.behavior;for(let{el:n,top:s,left:o}of Ui(e,go(t))){let a=s-i.top+i.bottom,l=o-i.left+i.right;n.scroll({top:a,left:l,behavior:r})}}var Vi,un=()=>(Vi||(Vi="performance"in window?performance.now.bind(performance):Date.now),Vi());function fn(e){let t=un(),i=Math.min((t-e.startTime)/e.duration,1),r=e.ease(i),n=e.startX+(e.x-e.startX)*r,s=e.startY+(e.y-e.startY)*r;e.method(n,s,i,r),n!==e.x||s!==e.y?requestAnimationFrame(()=>fn(e)):e.cb()}function vo(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:d=>1+--d*d*d*d*d,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=e,l=e.scrollLeft,h=e.scrollTop;fn({scrollable:a,method:(d,p,v,u)=>{let m=Math.ceil(d),g=Math.ceil(p);e.scrollLeft=m,e.scrollTop=g,o==null||o({target:e,elapsed:v,value:u,left:m,top:g})},startTime:un(),startX:l,startY:h,x:t,y:i,duration:r,ease:n,cb:s})}var bo=e=>e&&!e.behavior||e.behavior==="smooth",pn=function(e,t){let i=t||{};return bo(i)?kt(e,{block:i.block,inline:i.inline,scrollMode:i.scrollMode,boundary:i.boundary,skipOverflowHiddenElements:i.skipOverflowHiddenElements,behavior:r=>Promise.all(r.reduce((n,s)=>{let{el:o,left:a,top:l}=s,h=o.scrollLeft,d=o.scrollTop;return h===a&&d===l?n:[...n,new Promise(p=>vo(o,a,l,i.duration,i.ease,()=>p({el:o,left:[h,a],top:[d,l]}),i.onScrollChange))]},[]))}):Promise.resolve(kt(e,t))};var Wi=.75,yo={mounted(){this.reel=this.el.querySelector(".moon-reel"),this.items=this.reel.querySelectorAll("li"),this.indicators=this.el.querySelectorAll(".moon-indicator"),this.itemCount=this.items.length,this.leftArrow=this.el.querySelector(".moon-left-arrow"),this.rightArrow=this.el.querySelector(".moon-right-arrow"),this.itemsArray=this.getArray("li",this.reel),this.indicatorsArray=this.getArray(".moon-indicator",this.el),this.initScrolls(),this.setActiveItem(),this.initIntersectionObserver(),this.el.addEventListener("triggerLeftArrowClick",()=>{this.handleArrowClick(!0)}),this.el.addEventListener("triggerRightArrowClick",()=>{this.handleArrowClick(!1)}),this.delay=parseInt(this.el.dataset.autoslide_delay,10),isNaN(this.delay)||this.startAutoSlide(this.delay)},updated(){this.scrollToIndex()},setActiveItem(){let e=parseInt(this.el.dataset.value,10),t=this.itemsArray.length-1,i=this.itemsArray.findIndex((r,n)=>n===e);i<t&&i!==-1&&this.scrollIntoViewSmoothly(this.itemsArray[i],{block:"nearest",behavior:"smooth",inline:"nearest",boundary:this.reel})},initScrolls(){document&&"scrollBehavior"in document.documentElement.style?this.scrollIntoViewSmoothly=kt:this.scrollIntoViewSmoothly=pn},handleArrowClick(e){let t=e?this.findFirstVisibleIndex():this.findLastVisibleIndex(),i=parseInt(this.el.dataset.step,10),r=this.itemsArray.length-1,n;e?n=Math.max(0,t-i):n=Math.min(r,t+i);let s=this.itemsArray.findIndex((o,a)=>a===n);s!==-1&&this.scrollIntoViewSmoothly(this.itemsArray[s],{block:"nearest",inline:i===1?"center":"nearest",behavior:"smooth",boundary:this.reel})},scrollToIndex(){let e=this.el.querySelector(".active"),t=parseInt(this.el.dataset.step,10);e&&(this.scrollIntoViewSmoothly(e,{block:"nearest",inline:t===1?"center":"nearest",behavior:"smooth",boundary:this.reel}),this.processVisibleEntry({target:e}))},getArray(e,t){return Array.from(t.querySelectorAll(e))},initIntersectionObserver(){let e=new IntersectionObserver(t=>{t.forEach(i=>{i.intersectionRatio>=Wi?this.processVisibleEntry(i):this.processNotVisibleEntry(i)}),this.disableArrows()},{root:this.reel,threshold:Wi});return this.items.forEach(t=>{e.observe(t)}),()=>this.items.forEach(t=>{e.unobserve(t)})},processVisibleEntry(e,t=!1){e.target.setAttribute("visible","true");let i=this.itemsArray.indexOf(e.target),r=this.indicatorsArray[i];e.target.getAttribute("visible")==="true"&&r&&(r.classList.remove(r.dataset.default_bg_color),r.classList.add(r.dataset.selected_bg_color),e.target.classList.add("active")),t&&e.target.getAttribute("visible")==="true"&&this.pushEventTo(this.el,"set_selected_index",{value:`${i}`})},processNotVisibleEntry(e){e.target.removeAttribute("visible");let t=this.itemsArray.indexOf(e.target),i=this.indicatorsArray[t];e.target.getAttribute("visible")!=="true"&&i&&(e.target.classList.remove("active"),i.classList.add(i.dataset.default_bg_color),i.classList.remove(i.dataset.selected_bg_color))},findFirstVisibleIndex(){return this.itemsArray.findIndex(e=>e.getAttribute("visible")==="true")},findLastVisibleIndex(){let e=this.itemsArray.slice().reverse().findIndex(r=>r.getAttribute("visible")==="true"),t=this.itemsArray.length-1;return e>=0?t-e:e},disableArrows(){let e=this.findFirstVisibleIndex(),t=this.findLastVisibleIndex();e===0&&this.leftArrow?this.leftArrow.disabled=!0:this.leftArrow&&(this.leftArrow.disabled=!1),t===this.itemCount-1&&this.rightArrow?this.rightArrow.disabled=!0:this.rightArrow&&(this.rightArrow.disabled=!1)},startAutoSlide(){this.autoSlideTimeout=setInterval(()=>{let e=this.findLastVisibleIndex(),t=parseInt(this.el.dataset.step,10),i=this.itemsArray.length-1,r=(e+t)%(i+1),n=this.itemsArray.findIndex((s,o)=>o===r);n===i&&this.itemsArray[e]===this.itemsArray[n]&&(n=0),this.scrollIntoViewSmoothly(this.itemsArray[n],{block:"nearest",inline:t===1?"center":"nearest",behavior:"smooth",boundary:this.reel})},this.delay)}};var qi={};oi(qi,{default:()=>wo});var mn=e=>document.getElementById(e.id+"-content"),wo={mounted(){this.handleStateChange(this.el)},updated(){this.handleStateChange(this.el)},handleStateChange(e){e.dataset.is_open&&!e.dataset.visible&&this.showContent(e),!e.dataset.is_open&&e.dataset.visible&&this.hideContent(e)},hideContent(e){e.dataset.visible=!1,this.hidingTimeout&&clearTimeout(this.hidingTimeout);let t=mn(e);t.classList.replace(e.dataset.animate_class,"animate-fadeout"),setTimeout(()=>{t.classList.replace("animate-fadeout","hidden"),this.pushEventTo(e,"set_close",{})},500)},showContent(e){e.dataset.visible=!0;let t=mn(e);this.hideAllSnackbarsExpect(e),t.classList.replace("hidden",e.dataset.animate_class),e.dataset.autoclose&&(this.hidingTimeout=setTimeout(()=>this.hideContent(e),e.dataset.timeout))},hideAllSnackbarsExpect(e){Array.from(document.querySelectorAll("[data-snackbar]")).forEach(i=>{i.id!==e.id&&i.dataset.is_open&&this.hideContent(i)})}};function Xi(e,t){let i={};return Object.keys(e).map(function(r){i[`${t}#${r}`]=e[r]}),i}var xo=Object.assign(Xi($i,"Moon.Components.Popover"),Xi(Ji,"Moon.Design.Carousel"),Xi(qi,"Moon.Design.Snackbar")),gn=xo;window.addEventListener("moon:update-select",e=>{var t=e.target,i=e.detail;for(var r in t.options){var n=t.options[r];n.value==i.value&&(n.selected=i.selected)}t.dispatchEvent(new Event("input",{bubbles:!0}))});window.addEventListener("moon:update-switch",e=>{var t=e.target,i=e.detail,r=i.switch_id,n=document.getElementById(r+"_radio_false");i.checked?(t.checked=!0,t.dispatchEvent(new Event("input",{bubbles:!0}))):(n.checked=!0,n.dispatchEvent(new Event("input",{bubbles:!0})))});window.addEventListener("moon:update-accordion-aria",e=>{var t=e.detail.accordion_id,i=document.getElementById(t),r=i.getAttribute("aria-expanded");r=="true"?i.setAttribute("aria-expanded","false"):i.setAttribute("aria-expanded","true")});window.addEventListener("moon:toggle-collapsed-breadcrumbs",e=>{var t=e.detail,i=t.breacrumb_flyout_id,r=document.getElementById(i);r.classList.contains("hidden")?(r.classList.add("flex"),r.classList.remove("hidden")):(r.classList.add("hidden"),r.classList.remove("flex"))});window.addEventListener("moon:close-breadcrumb-flyout",e=>{var t=e.detail,i=t.breacrumb_flyout_id,r=document.getElementById(i);!e.target.element&&r.classList.contains("flex")&&(r.classList.remove("flex"),r.classList.add("hidden"))});window.addEventListener("moon2:update-switch",e=>{let t=e.target;t.checked=e.detail.checked,t.dispatchEvent(new Event("input",{bubbles:!0}))});window.addEventListener("moon2:clean-checkboxes",e=>{let t=e.target.parentNode.parentNode.parentNode.querySelectorAll("input[type=checkbox]");t.forEach(i=>i.checked=!1),t[0].dispatchEvent(new Event("input",{bubbles:!0}))});function Ao(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&document.selection.type!="Control"&&(e=document.selection.createRange().text),e}var rt={hiddenClasses(){return["sm","md","lg","xl","2xl"].map(e=>`${e}:hidden`).concat(["hidden"])},mounted(){this.backdrop=this.el.querySelector(".moon-backdrop"),this.panel=this.el.querySelector(".moon-panel"),this.showElementIfNeeded(),window.addEventListener("phx:navigate",e=>{document.body.style.overflow="auto"})},updated(){this.showElementIfNeeded(),this.hideElementIfNeeded()},showElementIfNeeded(){this.el.dataset.is_open===void 0||!this.el.classList.contains("hidden")||this.showElement()},hideElementIfNeeded(){this.el.dataset.is_closing==="true"&&(Ao()?this.pushEventTo(this.el,"stop_closing",{}):this.hideElement())},hideElement(){this.el.dataset.lg_persists!==void 0&&document.body.clientWidth>=1024||(this.panel.classList.remove(...this.panel.dataset.animate_enter_class.split(" ")),this.panel.classList.add(...this.panel.dataset.animate_leave_class.split(" ")),this.backdrop&&this.backdrop.classList.replace("animate-backdrop_enter","animate-backdrop_leave"),setTimeout(()=>{this.el.classList.add(...this.hiddenClasses()),this.pushEventTo(this.el,"set_close",{}),document.body.style.overflow="auto",this.was_open=!1},200))},showElement(){this.el.classList.remove(...this.hiddenClasses()),this.was_open||(this.panel.classList.add(...this.panel.dataset.animate_enter_class.split(" ")),this.backdrop&&this.backdrop.classList.add("animate-backdrop_enter")),this.was_open=this.el.dataset.is_open!==void 0,document.body.style.overflow="hidden"}};var vn={mounted(){var e=this.el,t=e.value,i=e.type;i==="date"&&e.addEventListener("change",function(r){var n=r.target,s=n.value;if(s.length>10){var o=s.substring(1);n.value=o}})},updated(){if(this.el.value){let e=this.el.dataset.pendingVal;e&&this.el.value!==e&&(this.el.value=e)}}};var Ct=(()=>document.addEventListener?(e,t,i)=>{if(e&&e.nodeName||e===window)e.addEventListener(t,i,!1);else if(e&&e.length)for(let r=0;r<e.length;r++)Ct(e[r],t,i)}:(e,t,i)=>{if(e&&e.nodeName||e===window)e.attachEvent(`on${t}`,()=>i.call(e,window.event));else if(e&&e.length)for(let r=0;r<e.length;r++)Ct(e[r],t,i)})(),bn=rr(ne({},rt),{mounted(){rt.mounted.bind(this)(),this.dragHandle=this.el.querySelector(" & > .moon-panel > .bottom_sheet_header > .moon-drag-handle")},updated(){rt.updated.bind(this)(),this.dragHandle&&this.setupSwipePanel()},setupSwipePanel(){let e={x:0,y:0},t=!1;Ct(document.body,"touchstart",i=>{let r=i.targetTouches[0];this.el.dataset.is_open!==void 0&&(e.x=r.pageX,e.y=r.pageY,panelHeight=this.panel.offsetHeight,t=!0)}),Ct(document.body,"touchmove",i=>{let r=i.targetTouches[0];if(t&&this.el.dataset.is_open!==void 0&&r.pageY>e.y){let n=Math.max(r.pageY-e.y,0);this.panel.style.transform=`translate(0, ${n}px)`}}),Ct(document.body,"touchend",i=>{let r=i.changedTouches[0],n=this.panel.offsetHeight,s=Math.max(r.pageY-e.y,0),o=n-s;t&&o<=n/2?(this.panel.classList.add("animate-backdrop_leave_swipe"),this.backdrop&&this.backdrop.classList.replace("animate-backdrop_enter","animate-backdrop_leave_swipe"),setTimeout(()=>{this.el.classList.add(...this.hiddenClasses()),this.pushEventTo(this.el,"set_close",{}),document.body.style.overflow="auto"},100),t=!1):t&&o>n/2&&(this.panel.style.transform="translate(0, 0)",t=!1)})}});var yn={mounted(){this.input=this.el.querySelector(".moon-comboinput"),this.dropdown=this.el.children[1]},updated(){this.input===document.activeElement&&this.dropdown.classList.remove("hidden")}};var wn={mounted(){this.inputs=Array.from(this.el.querySelectorAll('input:not([type="hidden"])')),this.hiddenField=this.el.querySelector('input[type="hidden"]'),this.inputValues=this.inputs.map(e=>e.value),this.hasFocusJump=!this.el.closest("form[phx-change]"),this.handleOnChange(),this.handleOnKeydown(),this.handleOnPaste()},handleOnChange(){this.inputs.forEach((e,t)=>{e.addEventListener("input",i=>{let r=i.target.value,n=this.inputs[t+1],s=e.getAttribute("pattern");r.length>1?(i.target.value=r.charAt(0),n!==void 0&&this.hasFocusJump&&n.focus()):r.match(new RegExp(s,"gi"))?n!==void 0&&this.hasFocusJump&&n.focus():i.target.value="",i.preventDefault(),this.updateHiddenField()})})},handleOnKeydown(){this.inputs.forEach((e,t)=>{e.addEventListener("keydown",i=>{let r=this.inputs[t-1];i.key==="Backspace"&&this.hasFocusJump&&(e.value===""?r!==void 0&&(r.value="",r.focus()):e.value="",this.updateHiddenField(),i.preventDefault())})})},handleOnPaste(){this.inputs.forEach((e,t)=>{e.addEventListener("paste",i=>{let r=this.inputs.length-1,n=this.inputs[r],s=i.clipboardData.getData("Text"),o=e.getAttribute("pattern"),a=t,l=0;for(let d=0;d<s.length;d++){let p=s.charAt(d);p.match(o)&&a<this.inputs.length&&(this.inputs[a].value=p,a++,l++)}let h=this.inputs[a];h!==void 0?h.focus():n.focus(),this.updateHiddenField(),this.hiddenField.dispatchEvent(new Event("input",{bubbles:!0})),i.preventDefault()})})},updateHiddenField(){let e=this.inputs.map(t=>t.value);this.hiddenField.value=e.join("")}};var xn={Animation:rt,Datepicker:vn,Bottomsheet:bn,Combobox:yn,Authcode:wn};var An=xn;var Eo=document.querySelector("meta[name='csrf-token']").getAttribute("content"),En=new Br("/live",or,{params:{_csrf_token:Eo},hooks:ne(ne({},An),gn)});ri.default.config({barColors:{0:"#29d"},shadowColor:"rgba(0, 0, 0, .3)"});window.addEventListener("phx:page-loading-start",e=>ri.default.show(300));window.addEventListener("phx:page-loading-stop",e=>ri.default.hide());En.connect();window.liveSocket=En;})();
